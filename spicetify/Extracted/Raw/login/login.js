(()=>{var e,t={3982:(e,t,o)=>{"use strict";var n={};o.r(n),o.d(n,{ENTER_LOGIN_MODE:()=>_,ENTER_SETTINGS_MODE:()=>S,ENTER_SIGNUP_MODE:()=>w,ENTER_SIGNUP_MODE_STEP_0:()=>v,ENTER_SIGNUP_MODE_STEP_1:()=>y,ENTER_WELCOME_MODE:()=>E,INTERACTION:()=>k,START_APP:()=>b,enterLoginMode:()=>T,enterSettingsMode:()=>A,enterSignupMode:()=>C,enterSignupModeStep0:()=>I,enterSignupModeStep1:()=>P,enterWelcomeMode:()=>N,interaction:()=>U,openSignupPage:()=>D,startApp:()=>O});var a={};o.r(a),o.d(a,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>de,ACCOUNTS_METHODS:()=>ce,LOADING:()=>ne,LOGIN_BEFORE:()=>Q,LOGIN_CLEAR_ERRORS:()=>te,LOGIN_FAIL:()=>oe,LOGIN_SUCCESS:()=>ee,LOGIN_TYPE_ACCOUNTS:()=>ge,LOGIN_TYPE_AUTOLOGIN:()=>le,LOGIN_TYPE_EMAIL:()=>se,LOGIN_TYPE_FACEBOOK:()=>re,LOGIN_TYPE_FACEBOOK_POPUP:()=>ie,UTM_PARAMETERS:()=>ae,abortLoginWithAccounts:()=>ve,fetchUTMParameters:()=>_e,loading:()=>he,login:()=>be,loginClearErrors:()=>Se,loginFailed:()=>me,loginSuccess:()=>ue,loginWithAccounts:()=>we,loginWithFacebookPopup:()=>ye,receivedUTMParameters:()=>Ee});var s={};o.r(s),o.d(s,{CLEAR_ALL_ERRORS:()=>Ke,COUNTRY_NOT_LAUNCHED:()=>Ye,FACEBOOK_SIGNUP_ATTEMPT:()=>Ge,FACEBOOK_SIGNUP_FAILURE:()=>$e,FACEBOOK_SIGNUP_SUCCESS:()=>He,SIGNUP_ATTEMPT:()=>xe,SIGNUP_FAILURE:()=>je,SIGNUP_RESTRICTIONS_FAILURE:()=>Re,SIGNUP_RESTRICTIONS_SUCCESS:()=>Me,SIGNUP_SUCCESS:()=>Be,UPDATE_SIGNUP_DATA:()=>qe,VALIDATE_FIELD_ATTEMPT:()=>We,VALIDATE_FIELD_FAILURE:()=>Ve,VALIDATE_FIELD_SUCCESS:()=>ze,clearAllErrors:()=>ut,countryNotLaunched:()=>pt,facebookSignup:()=>st,facebookSignupFailure:()=>it,facebookSignupSuccess:()=>rt,getSignupRestrictions:()=>Xe,signup:()=>Qe,signupAttempt:()=>tt,signupFailure:()=>nt,signupRestrictionsFailure:()=>Je,signupRestrictionsSuccess:()=>Ze,signupSuccess:()=>ot,signupWithAccounts:()=>at,updateSignupData:()=>ct,validateField:()=>et,validateFieldAttempt:()=>lt,validateFieldFailure:()=>gt,validateFieldSuccess:()=>dt});var r={};o.r(r),o.d(r,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>Tt,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>Pt,SETTINGS_RESTART_CLIENT_FAILURE:()=>Ut,SETTINGS_RESTART_CLIENT_SUCCESS:()=>Dt,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>At,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>Nt,fetchProxySettings:()=>Lt,restartClient:()=>Mt,updateProxySettings:()=>Ft});var i=o(7294),l=o.n(i),g=o(3935),d=o.n(g),c=o(7209),p=o(5858),u=o(2976),m=o(685),h=o(9713),f=o.n(h);const b="START_APP",w="ENTER_SIGNUP_MODE",v="ENTER_SIGNUP_MODE_STEP_0",y="ENTER_SIGNUP_MODE_STEP_1",_="ENTER_LOGIN_MODE",E="ENTER_WELCOME_MODE",S="ENTER_SETTINGS_MODE",k="INTERACTION";function O(){return{type:b}}function C(e=null){return{type:w,actionHash:e}}function I(){return{type:v}}function P(){return{type:y}}function T(e=null){return{type:_,actionHash:e}}function N(e=null){return{type:E,errorMessage:e}}function A(){return{type:S}}function D(e=!1){return(t,o)=>{const n=o();let a,s={};switch(e?"website":"desktop-app"){case"desktop-app":t(C());break;case"website":{s=n.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""};const e=Object.keys(s).reduce(((e,t)=>(e[t]=encodeURIComponent(s[t]),e)),{});a=`https://www.spotify.com/signup?utm_source=${e.utm_source}&utm_medium=${e.utm_medium}&utm_campaign=${e.utm_campaign}`,e.referral&&(a+=`&referral=${e.referral}&referrer=${e.referral}`),window.open(a);break}}}}function U(e,t,o,n,a){return{type:k,page:e,interactionType:t,intent:o,itemId:n,actionHash:a}}const L=e=>o.g&&"function"==typeof o.g._getSpotifyModule?new Promise(((t,n)=>{o.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:n})})):null,F="https://www.spotify.com/redirect/account-page/",M="showSettings",R={id:"UnknownLoginErrorMessage"},x={id:"DefaultErrorMessage",replace:[M]},j={id:"FbFailureOpenPopup",silent:!0},B={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[M]},400:R,401:R,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:R,405:R,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[F]},408:{id:"RegionMismatchMessage",replace:[F,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:R,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:R,415:R,416:R,417:{id:"FacebookCredentialsMisusedMessage"},418:R,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]},1001:{silent:!0},1002:j,1003:{id:"FbUserNotFoundSignUp",replace:["showSignup"]},1004:j,1005:j,1006:j},G={1:R,2:R,3:{id:"BadCredentialsMessage"},4:R,5:R,6:R,7:R,8:R,9:R},H={1:{silent:!0},2:R,3:R,4:{id:"SessionExpiredMessage"},5:x},$=window.localStorage;function W(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function V(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?W(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):W(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const z="lastUsername",q="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",Y="utmParameters",K=$.getItem(Y),X=$.getItem(z),Z={errorData:null,loginInProgress:!1,redirectTo:null,username:X!==q?X:"",utmParameters:K?JSON.parse(K):null};const J=function(e=Z,t){switch(t.type){case jt.LOADING:return V(V({},e),{},{loading:!0,throbberDelay:t.throbberDelay});case jt.LOGIN_FAIL:return V(V({},e),{},{loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1});case jt.LOGIN_BEFORE:return V(V({},e),{},{errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username});case jt.LOGIN_SUCCESS:return V(V({},e),{},{loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username});case jt.UTM_PARAMETERS:return V(V({},e),{},{utmParameters:t.utmParameters});case jt.LOGIN_CLEAR_ERRORS:return V(V({},e),{},{errorData:null});default:return e}},Q="LOGIN_BEFORE",ee="LOGIN_SUCCESS",te="LOGIN_CLEAR_ERRORS",oe="LOGIN_FAIL",ne="LOADING",ae="UTM_PARAMETERS",se="login",re="login-facebook",ie="login-facebook-popup",le="autologin",ge="login-accounts",de="abort-login-accounts",ce={facebook:"facebook",apple:"apple",google:"google"};function pe(e,t=se){return{type:Q,errorData:null,username:e||"",loginInProgress:t===se,loginType:t}}function ue(e,t,o=se,n=!1,a){return{type:ee,errorData:null,redirectTo:a,redirectDelay:t||0,username:e,loginType:o,afterSignup:n}}function me(e,t=se){return{type:oe,errorData:e,loginType:t}}function he(e){return{type:ne,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}const fe=async(e,t,{defaultErrorCode:o,redirectDelay:n=0}={},a=se,s=!1,r=null,i=!0)=>{r&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=r);try{const o=JSON.parse(await L(t)).redirectTo||"xpui";let r=null;t&&t.args&&t.args[0]&&(r=t.args[0].username),e(ue(i?r:q,n,a,s,o))}catch(t){let n=t;o?n={errorCode:o}:"string"==typeof t&&(n=JSON.parse(t)),n.errorCode&&B[n.errorCode]&&"FbFailureOpenPopup"===B[n.errorCode].id?e(ye(r)):e(me(n,a))}};function be({username:e,password:t,rememberMe:o},n=!1,a=null){return s=>{const r=n?le:se;s(pe(o?e:q,r));fe(s,{name:se,args:[{username:e,password:t,rememberMe:o}]},{redirectDelay:200},r,n,a,o)}}function we(e,t){return o=>{o(pe(null,ge));fe(o,{name:ge,args:[{method:e,enableSignup:!1}]},{redirectDelay:200},ge,!1,t)}}function ve(){return async()=>{await L({name:de,args:[]})}}function ye(e=null){return t=>{t(pe(null,re));fe(t,{name:ie,args:[]},{redirectDelay:200},re,!1,e)}}function _e(){return async e=>{e(Ee(JSON.parse(await L({name:"get-signup-utm-parameters",args:[]}))))}}function Ee(e){return{type:ae,utmParameters:e}}function Se(){return{type:te}}var ke=o(6479),Oe=o.n(ke),Ce=o(8495),Ie=o.n(Ce);const Pe=["errors"];function Te(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY;return e||"4c7a36d5260abca4af282779720cf631"}function Ne(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return["Spotify-App-Version",e]}function Ae(){const e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"";let t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return["App-Platform",t]}function De(e){const t=new Map(Object.entries(e).sort()),o=function(e){const t=Ie().create();return e.forEach((e=>{void 0!==e&&t.update(e.toString())})),t.hex()}(t);if(t.size>o.length)return t;const n=[...t],a=[...Array(t.size).keys()].sort((function(e,t){const a=o.charAt(e).localeCompare(o.charAt(t));return 0!==a?a:n[e][0].localeCompare(n[t][0])})),s=new Map;return a.forEach((function(e){s.set(n[e][0],n[e][1])})),s}const Ue=e=>async(t,o,n)=>{const a=function({name:e,email:t,password:o,gender:n,birthDate:a={},sendEmail:s,shareData:r,agreeEula:i}={},l={utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},g=!1){const d=Object.keys(l).reduce(((e,t)=>(e[t]=encodeURIComponent(l[t]),e)),{});let c=`https://login.app.spotify.com?utm_source=${d.utm_source}&utm_medium=${d.utm_medium}&utm_campaign=${d.utm_campaign}`;d.referral&&(c+=`&referral=${d.referral}&referrer=${d.referral}`);const p={key:Te(),displayname:e,email:t,password:o,password_repeat:o,gender:n,birth_year:a.year,birth_month:a.month,birth_day:a.day,iagree:i?1:0,creation_point:c,creation_flow:"desktop",platform:"desktop",referrer:d.referral};return"boolean"==typeof s&&(p["send-email"]=s),"boolean"==typeof r&&(p.thirdpartyemail=r),g&&Object.keys(p).forEach((e=>{void 0===p[e]&&delete p[e]})),De(p)}(t,o,n),s=new FormData;a.forEach(((e,t)=>{s.append(t,e)}));const r=[Ne(),Ae()].reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),i={method:"POST",body:s,headers:{"App-Platform":r["App-Platform"],"Spotify-App-Version":r["Spotify-App-Version"],"X-Client-Id":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0,CDN_FILE_URLS:'{"fonts/CircularSpUIAraOnly-Black.otf":"/fonts/CircularSpUIAraOnly-Black.otf","fonts/CircularSpUIAraOnly-Black.woff":"/fonts/CircularSpUIAraOnly-Black.woff","fonts/CircularSpUIAraOnly-Black.woff2":"/fonts/CircularSpUIAraOnly-Black.woff2","fonts/CircularSpUIAraOnly-Bold.otf":"/fonts/CircularSpUIAraOnly-Bold.otf","fonts/CircularSpUIAraOnly-Bold.woff":"/fonts/CircularSpUIAraOnly-Bold.woff","fonts/CircularSpUIAraOnly-Bold.woff2":"/fonts/CircularSpUIAraOnly-Bold.woff2","fonts/CircularSpUIAraOnly-Book.otf":"/fonts/CircularSpUIAraOnly-Book.otf","fonts/CircularSpUIAraOnly-Book.woff":"/fonts/CircularSpUIAraOnly-Book.woff","fonts/CircularSpUIAraOnly-Book.woff2":"/fonts/CircularSpUIAraOnly-Book.woff2","fonts/CircularSpUIAraOnly-Light.otf":"/fonts/CircularSpUIAraOnly-Light.otf","fonts/CircularSpUIAraOnly-Light.woff":"/fonts/CircularSpUIAraOnly-Light.woff","fonts/CircularSpUIAraOnly-Light.woff2":"/fonts/CircularSpUIAraOnly-Light.woff2","fonts/CircularSpUICyrOnly-Black.otf":"/fonts/CircularSpUICyrOnly-Black.otf","fonts/CircularSpUICyrOnly-Black.woff":"/fonts/CircularSpUICyrOnly-Black.woff","fonts/CircularSpUICyrOnly-Black.woff2":"/fonts/CircularSpUICyrOnly-Black.woff2","fonts/CircularSpUICyrOnly-Bold.otf":"/fonts/CircularSpUICyrOnly-Bold.otf","fonts/CircularSpUICyrOnly-Bold.woff":"/fonts/CircularSpUICyrOnly-Bold.woff","fonts/CircularSpUICyrOnly-Bold.woff2":"/fonts/CircularSpUICyrOnly-Bold.woff2","fonts/CircularSpUICyrOnly-Book.otf":"/fonts/CircularSpUICyrOnly-Book.otf","fonts/CircularSpUICyrOnly-Book.woff":"/fonts/CircularSpUICyrOnly-Book.woff","fonts/CircularSpUICyrOnly-Book.woff2":"/fonts/CircularSpUICyrOnly-Book.woff2","fonts/CircularSpUICyrOnly-Light.otf":"/fonts/CircularSpUICyrOnly-Light.otf","fonts/CircularSpUICyrOnly-Light.woff":"/fonts/CircularSpUICyrOnly-Light.woff","fonts/CircularSpUICyrOnly-Light.woff2":"/fonts/CircularSpUICyrOnly-Light.woff2","fonts/CircularSpUIHbrOnly-Black.otf":"/fonts/CircularSpUIHbrOnly-Black.otf","fonts/CircularSpUIHbrOnly-Black.woff":"/fonts/CircularSpUIHbrOnly-Black.woff","fonts/CircularSpUIHbrOnly-Black.woff2":"/fonts/CircularSpUIHbrOnly-Black.woff2","fonts/CircularSpUIHbrOnly-Bold.otf":"/fonts/CircularSpUIHbrOnly-Bold.otf","fonts/CircularSpUIHbrOnly-Bold.woff":"/fonts/CircularSpUIHbrOnly-Bold.woff","fonts/CircularSpUIHbrOnly-Bold.woff2":"/fonts/CircularSpUIHbrOnly-Bold.woff2","fonts/CircularSpUIHbrOnly-Book.otf":"/fonts/CircularSpUIHbrOnly-Book.otf","fonts/CircularSpUIHbrOnly-Book.woff":"/fonts/CircularSpUIHbrOnly-Book.woff","fonts/CircularSpUIHbrOnly-Book.woff2":"/fonts/CircularSpUIHbrOnly-Book.woff2","fonts/CircularSpUIHbrOnly-Light.otf":"/fonts/CircularSpUIHbrOnly-Light.otf","fonts/CircularSpUIHbrOnly-Light.woff":"/fonts/CircularSpUIHbrOnly-Light.woff","fonts/CircularSpUIHbrOnly-Light.woff2":"/fonts/CircularSpUIHbrOnly-Light.woff2","fonts/CircularSpUIv3T-Black.ttf":"/fonts/CircularSpUIv3T-Black.ttf","fonts/CircularSpUIv3T-Black.woff":"/fonts/CircularSpUIv3T-Black.woff","fonts/CircularSpUIv3T-Black.woff2":"/fonts/CircularSpUIv3T-Black.woff2","fonts/CircularSpUIv3T-Bold.ttf":"/fonts/CircularSpUIv3T-Bold.ttf","fonts/CircularSpUIv3T-Bold.woff":"/fonts/CircularSpUIv3T-Bold.woff","fonts/CircularSpUIv3T-Bold.woff2":"/fonts/CircularSpUIv3T-Bold.woff2","fonts/CircularSpUIv3T-Book.ttf":"/fonts/CircularSpUIv3T-Book.ttf","fonts/CircularSpUIv3T-Book.woff":"/fonts/CircularSpUIv3T-Book.woff","fonts/CircularSpUIv3T-Book.woff2":"/fonts/CircularSpUIv3T-Book.woff2","fonts/CircularSpUIv3T-Light.ttf":"/fonts/CircularSpUIv3T-Light.ttf","fonts/CircularSpUIv3T-Light.woff":"/fonts/CircularSpUIv3T-Light.woff","fonts/CircularSpUIv3T-Light.woff2":"/fonts/CircularSpUIv3T-Light.woff2","fonts/spoticon_regular_2.ttf":"/fonts/spoticon_regular_2.ttf","fonts/spoticon_regular_2.woff":"/fonts/spoticon_regular_2.woff","fonts/spoticon_regular_2.woff2":"/fonts/spoticon_regular_2.woff2","images/checkmark.png":"/images/checkmark.png","images/concert-hub-fb-card.png":"/images/concert-hub-fb-card.png","images/concert-hub-header.png":"/images/concert-hub-header.png","images/concert-hub-iphone-de.png":"/images/concert-hub-iphone-de.png","images/concert-hub-iphone-el.png":"/images/concert-hub-iphone-el.png","images/concert-hub-iphone-en.png":"/images/concert-hub-iphone-en.png","images/concert-hub-iphone-es_419.png":"/images/concert-hub-iphone-es_419.png","images/concert-hub-iphone-es.png":"/images/concert-hub-iphone-es.png","images/concert-hub-iphone-fi.png":"/images/concert-hub-iphone-fi.png","images/concert-hub-iphone-fr_CA.png":"/images/concert-hub-iphone-fr_CA.png","images/concert-hub-iphone-fr.png":"/images/concert-hub-iphone-fr.png","images/concert-hub-iphone-hu.png":"/images/concert-hub-iphone-hu.png","images/concert-hub-iphone-id.png":"/images/concert-hub-iphone-id.png","images/concert-hub-iphone-it.png":"/images/concert-hub-iphone-it.png","images/concert-hub-iphone-ja.png":"/images/concert-hub-iphone-ja.png","images/concert-hub-iphone-ms.png":"/images/concert-hub-iphone-ms.png","images/concert-hub-iphone-nl.png":"/images/concert-hub-iphone-nl.png","images/concert-hub-iphone-pl.png":"/images/concert-hub-iphone-pl.png","images/concert-hub-iphone-pt_BR.png":"/images/concert-hub-iphone-pt_BR.png","images/concert-hub-iphone-sv.png":"/images/concert-hub-iphone-sv.png","images/concert-hub-iphone-tr.png":"/images/concert-hub-iphone-tr.png","images/concert-hub-iphone-zh_TW.png":"/images/concert-hub-iphone-zh_TW.png","images/concert-hub-twitter-card.png":"/images/concert-hub-twitter-card.png","images/connect_header@1x.png":"/images/connect_header@1x.png","images/connect-to-devices-white.svg":"/images/connect-to-devices-white.svg","images/desktop-auth-check.svg":"/images/desktop-auth-check.svg","images/desktop-auth-error.svg":"/images/desktop-auth-error.svg","images/devices/android.png":"/images/devices/android.png","images/devices/ios.png":"/images/devices/ios.png","images/devices/mac-web.png":"/images/devices/mac-web.png","images/devices/mac.png":"/images/devices/mac.png","images/devices/windowsphone.png":"/images/devices/windowsphone.png","images/download-badges/apple/ar.svg":"/images/download-badges/apple/ar.svg","images/download-badges/apple/az.svg":"/images/download-badges/apple/az.svg","images/download-badges/apple/bg.svg":"/images/download-badges/apple/bg.svg","images/download-badges/apple/cs_CZ.svg":"/images/download-badges/apple/cs_CZ.svg","images/download-badges/apple/da.svg":"/images/download-badges/apple/da.svg","images/download-badges/apple/de.svg":"/images/download-badges/apple/de.svg","images/download-badges/apple/ee.svg":"/images/download-badges/apple/ee.svg","images/download-badges/apple/el.svg":"/images/download-badges/apple/el.svg","images/download-badges/apple/en.svg":"/images/download-badges/apple/en.svg","images/download-badges/apple/es_mx.svg":"/images/download-badges/apple/es_mx.svg","images/download-badges/apple/es.svg":"/images/download-badges/apple/es.svg","images/download-badges/apple/fi.svg":"/images/download-badges/apple/fi.svg","images/download-badges/apple/fp.svg":"/images/download-badges/apple/fp.svg","images/download-badges/apple/fr_ca.svg":"/images/download-badges/apple/fr_ca.svg","images/download-badges/apple/fr.svg":"/images/download-badges/apple/fr.svg","images/download-badges/apple/he.svg":"/images/download-badges/apple/he.svg","images/download-badges/apple/hu.svg":"/images/download-badges/apple/hu.svg","images/download-badges/apple/id.svg":"/images/download-badges/apple/id.svg","images/download-badges/apple/int.svg":"/images/download-badges/apple/int.svg","images/download-badges/apple/it.svg":"/images/download-badges/apple/it.svg","images/download-badges/apple/ja.svg":"/images/download-badges/apple/ja.svg","images/download-badges/apple/ko.svg":"/images/download-badges/apple/ko.svg","images/download-badges/apple/lt.svg":"/images/download-badges/apple/lt.svg","images/download-badges/apple/lv.svg":"/images/download-badges/apple/lv.svg","images/download-badges/apple/ms.svg":"/images/download-badges/apple/ms.svg","images/download-badges/apple/mt.svg":"/images/download-badges/apple/mt.svg","images/download-badges/apple/nb.svg":"/images/download-badges/apple/nb.svg","images/download-badges/apple/nl.svg":"/images/download-badges/apple/nl.svg","images/download-badges/apple/pl.svg":"/images/download-badges/apple/pl.svg","images/download-badges/apple/pt_br.svg":"/images/download-badges/apple/pt_br.svg","images/download-badges/apple/pt.svg":"/images/download-badges/apple/pt.svg","images/download-badges/apple/ro.svg":"/images/download-badges/apple/ro.svg","images/download-badges/apple/ru.svg":"/images/download-badges/apple/ru.svg","images/download-badges/apple/sk.svg":"/images/download-badges/apple/sk.svg","images/download-badges/apple/sl.svg":"/images/download-badges/apple/sl.svg","images/download-badges/apple/sv.svg":"/images/download-badges/apple/sv.svg","images/download-badges/apple/th_TH.svg":"/images/download-badges/apple/th_TH.svg","images/download-badges/apple/tr.svg":"/images/download-badges/apple/tr.svg","images/download-badges/apple/vi_VN.svg":"/images/download-badges/apple/vi_VN.svg","images/download-badges/apple/zh_HANS.svg":"/images/download-badges/apple/zh_HANS.svg","images/download-badges/apple/zh_HANT.svg":"/images/download-badges/apple/zh_HANT.svg","images/download-badges/google/af.svg":"/images/download-badges/google/af.svg","images/download-badges/google/am.svg":"/images/download-badges/google/am.svg","images/download-badges/google/ar.svg":"/images/download-badges/google/ar.svg","images/download-badges/google/az.svg":"/images/download-badges/google/az.svg","images/download-badges/google/be.svg":"/images/download-badges/google/be.svg","images/download-badges/google/bg.svg":"/images/download-badges/google/bg.svg","images/download-badges/google/bn.svg":"/images/download-badges/google/bn.svg","images/download-badges/google/bs.svg":"/images/download-badges/google/bs.svg","images/download-badges/google/ca.svg":"/images/download-badges/google/ca.svg","images/download-badges/google/cr.svg":"/images/download-badges/google/cr.svg","images/download-badges/google/cs_CZ.svg":"/images/download-badges/google/cs_CZ.svg","images/download-badges/google/da.svg":"/images/download-badges/google/da.svg","images/download-badges/google/de.svg":"/images/download-badges/google/de.svg","images/download-badges/google/el.svg":"/images/download-badges/google/el.svg","images/download-badges/google/en.svg":"/images/download-badges/google/en.svg","images/download-badges/google/es_419.svg":"/images/download-badges/google/es_419.svg","images/download-badges/google/es.svg":"/images/download-badges/google/es.svg","images/download-badges/google/et.svg":"/images/download-badges/google/et.svg","images/download-badges/google/eu.svg":"/images/download-badges/google/eu.svg","images/download-badges/google/fa.svg":"/images/download-badges/google/fa.svg","images/download-badges/google/fi.svg":"/images/download-badges/google/fi.svg","images/download-badges/google/fp.svg":"/images/download-badges/google/fp.svg","images/download-badges/google/fr_ca.svg":"/images/download-badges/google/fr_ca.svg","images/download-badges/google/fr.svg":"/images/download-badges/google/fr.svg","images/download-badges/google/gl.svg":"/images/download-badges/google/gl.svg","images/download-badges/google/gu.svg":"/images/download-badges/google/gu.svg","images/download-badges/google/he.svg":"/images/download-badges/google/he.svg","images/download-badges/google/hi.svg":"/images/download-badges/google/hi.svg","images/download-badges/google/hr.svg":"/images/download-badges/google/hr.svg","images/download-badges/google/hu.svg":"/images/download-badges/google/hu.svg","images/download-badges/google/hy.svg":"/images/download-badges/google/hy.svg","images/download-badges/google/id.svg":"/images/download-badges/google/id.svg","images/download-badges/google/int.svg":"/images/download-badges/google/int.svg","images/download-badges/google/is.svg":"/images/download-badges/google/is.svg","images/download-badges/google/it.svg":"/images/download-badges/google/it.svg","images/download-badges/google/ja.svg":"/images/download-badges/google/ja.svg","images/download-badges/google/ka.svg":"/images/download-badges/google/ka.svg","images/download-badges/google/kk.svg":"/images/download-badges/google/kk.svg","images/download-badges/google/km.svg":"/images/download-badges/google/km.svg","images/download-badges/google/kn.svg":"/images/download-badges/google/kn.svg","images/download-badges/google/ko.svg":"/images/download-badges/google/ko.svg","images/download-badges/google/ky.svg":"/images/download-badges/google/ky.svg","images/download-badges/google/lo.svg":"/images/download-badges/google/lo.svg","images/download-badges/google/lt.svg":"/images/download-badges/google/lt.svg","images/download-badges/google/lv.svg":"/images/download-badges/google/lv.svg","images/download-badges/google/mk.svg":"/images/download-badges/google/mk.svg","images/download-badges/google/ml.svg":"/images/download-badges/google/ml.svg","images/download-badges/google/mn.svg":"/images/download-badges/google/mn.svg","images/download-badges/google/mr.svg":"/images/download-badges/google/mr.svg","images/download-badges/google/ms.svg":"/images/download-badges/google/ms.svg","images/download-badges/google/my.svg":"/images/download-badges/google/my.svg","images/download-badges/google/nb.svg":"/images/download-badges/google/nb.svg","images/download-badges/google/ne.svg":"/images/download-badges/google/ne.svg","images/download-badges/google/nl.svg":"/images/download-badges/google/nl.svg","images/download-badges/google/pa.svg":"/images/download-badges/google/pa.svg","images/download-badges/google/pl.svg":"/images/download-badges/google/pl.svg","images/download-badges/google/pt_br.svg":"/images/download-badges/google/pt_br.svg","images/download-badges/google/pt.svg":"/images/download-badges/google/pt.svg","images/download-badges/google/ro.svg":"/images/download-badges/google/ro.svg","images/download-badges/google/ru.svg":"/images/download-badges/google/ru.svg","images/download-badges/google/si.svg":"/images/download-badges/google/si.svg","images/download-badges/google/sk.svg":"/images/download-badges/google/sk.svg","images/download-badges/google/sl.svg":"/images/download-badges/google/sl.svg","images/download-badges/google/sq.svg":"/images/download-badges/google/sq.svg","images/download-badges/google/sr.svg":"/images/download-badges/google/sr.svg","images/download-badges/google/sv.svg":"/images/download-badges/google/sv.svg","images/download-badges/google/sw.svg":"/images/download-badges/google/sw.svg","images/download-badges/google/ta.svg":"/images/download-badges/google/ta.svg","images/download-badges/google/te.svg":"/images/download-badges/google/te.svg","images/download-badges/google/th_TH.svg":"/images/download-badges/google/th_TH.svg","images/download-badges/google/tr.svg":"/images/download-badges/google/tr.svg","images/download-badges/google/ua.svg":"/images/download-badges/google/ua.svg","images/download-badges/google/ur.svg":"/images/download-badges/google/ur.svg","images/download-badges/google/uz.svg":"/images/download-badges/google/uz.svg","images/download-badges/google/vi_VN.svg":"/images/download-badges/google/vi_VN.svg","images/download-badges/google/zh_HANS.svg":"/images/download-badges/google/zh_HANS.svg","images/download-badges/google/zh_HANT.svg":"/images/download-badges/google/zh_HANT.svg","images/download-badges/google/zh_hk.svg":"/images/download-badges/google/zh_hk.svg","images/download-badges/google/zu.svg":"/images/download-badges/google/zu.svg","images/embed-podcast/upsell-background.png":"/images/embed-podcast/upsell-background.png","images/embed/copy-32_circle_grey_outline_bg.svg":"/images/embed/copy-32_circle_grey_outline_bg.svg","images/embed/embed-code-32_circle_grey_outline_bg.svg":"/images/embed/embed-code-32_circle_grey_outline_bg.svg","images/embed/fb_colour.svg":"/images/embed/fb_colour.svg","images/embed/messenger_colour.svg":"/images/embed/messenger_colour.svg","images/embed/twitter_colour.svg":"/images/embed/twitter_colour.svg","images/embed/whatsapp.svg":"/images/embed/whatsapp.svg","images/employee-podcasts-modal-art.png":"/images/employee-podcasts-modal-art.png","images/equaliser-animated-green.gif":"/images/equaliser-animated-green.gif","images/equaliser-green.svg":"/images/equaliser-green.svg","images/favicon.ico":"/images/favicon.ico","images/favicon.png":"/images/favicon.png","images/favicon16.png":"/images/favicon16.png","images/favicon32.png":"/images/favicon32.png","images/focused_stroy_play.png":"/images/focused_stroy_play.png","images/follow/avatar-placeholder.png":"/images/follow/avatar-placeholder.png","images/follow/sprite.gif":"/images/follow/sprite.gif","images/follow/sprite@1.png":"/images/follow/sprite@1.png","images/hifi-button-off.svg":"/images/hifi-button-off.svg","images/hifi-button-on.svg":"/images/hifi-button-on.svg","images/hifi.svg":"/images/hifi.svg","images/home-icon.svg":"/images/home-icon.svg","images/icons/Spotify_1024.png":"/images/icons/Spotify_1024.png","images/icons/Spotify_128.png":"/images/icons/Spotify_128.png","images/icons/Spotify_16.png":"/images/icons/Spotify_16.png","images/icons/Spotify_256.png":"/images/icons/Spotify_256.png","images/icons/Spotify_32.png":"/images/icons/Spotify_32.png","images/icons/Spotify_512.png":"/images/icons/Spotify_512.png","images/icons/Spotify_64.png":"/images/icons/Spotify_64.png","images/icons/Spotify_MWP_192.png":"/images/icons/Spotify_MWP_192.png","images/icons/Spotify_MWP_512.png":"/images/icons/Spotify_MWP_512.png","images/improved-modal-bg.jpg":"/images/improved-modal-bg.jpg","images/login-background.jpg":"/images/login-background.jpg","images/login-signup-burst.svg":"/images/login-signup-burst.svg","images/logo-complete-black.svg":"/images/logo-complete-black.svg","images/logo-white-2x.png":"/images/logo-white-2x.png","images/mid-year.png":"/images/mid-year.png","images/mwp-episodelist-placeholder.png":"/images/mwp-episodelist-placeholder.png","images/mwp-tracklist-placeholder.png":"/images/mwp-tracklist-placeholder.png","images/og-image.png":"/images/og-image.png","images/playlist-folder-filled.svg":"/images/playlist-folder-filled.svg","images/ribbon-graphic-mobile.svg":"/images/ribbon-graphic-mobile.svg","images/ribbon-graphic-small-side.svg":"/images/ribbon-graphic-small-side.svg","images/ribbon-graphic-small-top.svg":"/images/ribbon-graphic-small-top.svg","images/ribbon-graphic.svg":"/images/ribbon-graphic.svg","images/s2l-desktopui-ltr.png":"/images/s2l-desktopui-ltr.png","images/s2l-desktopui-rtl.png":"/images/s2l-desktopui-rtl.png","images/s2l-mobileui.png":"/images/s2l-mobileui.png","images/spotifylogo.svg":"/images/spotifylogo.svg","images/station-header-wave.svg":"/images/station-header-wave.svg","images/station-wave.svg":"/images/station-wave.svg","images/sw_saber_ahsoka1.png":"/images/sw_saber_ahsoka1.png","images/sw_saber_anakin.png":"/images/sw_saber_anakin.png","images/sw_saber_leia.png":"/images/sw_saber_leia.png","images/sw_saber_luke.png":"/images/sw_saber_luke.png","images/sw_saber_mace.png":"/images/sw_saber_mace.png","images/sw_saber_rey.png":"/images/sw_saber_rey.png","images/sw_saber_vader.png":"/images/sw_saber_vader.png","images/touch-icon-114.png":"/images/touch-icon-114.png","images/touch-icon-144.png":"/images/touch-icon-144.png","images/touch-icon-57.png":"/images/touch-icon-57.png","images/touch-icon-72.png":"/images/touch-icon-72.png","images/tracklist-placeholder.png":"/images/tracklist-placeholder.png","images/vinyl-bottom-layer.svg":"/images/vinyl-bottom-layer.svg","images/vinyl-top-layer.svg":"/images/vinyl-top-layer.svg","images/zara-larsson-singles.png":"/images/zara-larsson-singles.png","js/fb.js":"/js/fb.js","js/gtm.js":"/js/gtm.js","js/retargeting-pixels.js":"/js/retargeting-pixels.js","js/urlRedirect.js":"/js/urlRedirect.js","js/urlScheme.js":"/js/urlScheme.js"}',PRODUCT_NAME:"desktop"}.SPOTIFY_CLIENT_ID}},l=new Request(e,i);((e,t)=>{const o=e.headers.get("content-type");e.headers.set("content-type",((e,t)=>[...e.split(";"),t].join(";"))(o,t))})(l,"charset=utf-8");const g=await fetch(l),d=await g.json()||{},{errors:c}=d,p=Oe()(d,Pe);if(c)throw c;return p},Le=Ue("https://spclient.wg.spotify.com/signup/public/v1/account/"),Fe=Ue("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true");const Me="SIGNUP_RESTRICTIONS_SUCCESS",Re="SIGNUP_RESTRICTIONS_FAILURE",xe="SIGNUP_ATTEMPT",je="SIGNUP_FAILURE",Be="SIGNUP_SUCCESS",Ge="FACEBOOK_SIGNUP_ATTEMPT",He="FACEBOOK_SIGNUP_SUCCESS",$e="FACEBOOK_SIGNUP_FAILURE",We="VALIDATE_FIELD_ATTEMPT",Ve="VALIDATE_FIELD_FAILURE",ze="VALIDATE_FIELD_SUCCESS",qe="UPDATE_SIGNUP_DATA",Ye="COUNTRY_NOT_LAUNCHED",Ke="CLEAR_ALL_ERRORS";function Xe(){return async(e,t)=>{const o=t();try{e(Ze(window.__spotify&&!0===window.__spotify.is_running_on_teamcity?{}:await(async()=>{const e=await fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1"),t=await e.json()||{};if(t.errors&&t.errors.length>0)throw t.errors;return t})()))}catch(t){e(Je(t)),o.app&&o.app.mode&&"welcome"!==o.app.mode&&(e(T()),e(D(!0)))}}}function Ze(e){return{type:Me,restrictions:e}}function Je(e){return{type:Re,error:e}}function Qe(e=null){return async(t,o)=>{t(tt());const n=o().signup.formData,a=o().login.utmParameters;try{await Le(n,a),t(ot());const{email:o,password:s}=n;t(be({username:o,password:s,rememberMe:!0},!0,e))}catch(e){const o={};Object.keys(e).forEach((t=>{o["birthdate"===t?"birthDate":t]={message:e[t]}})),t(nt(o))}}}function et(e){return async(t,o)=>{const n=o().signup.formData[e],a=o().login.utmParameters;t(lt(e,n));try{await Fe({[e]:n},a,!0)}catch(o){o[e]&&t(gt(e,{message:o[e]}))}}}function tt(){return{type:xe}}function ot(){return{type:Be}}function nt(e){return{type:je,errors:e}}function at(e,t=null){return o=>{const n={name:ge,args:[{method:e,enableSignup:!0}]};o(st()),(async(e,t,o=null)=>{o&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=o);try{const o=JSON.parse(await L(t)).redirectTo||"xpui";e(rt()),e(ue(null,0,le,!0,o))}catch(t){let o=t;"string"==typeof t&&(o=JSON.parse(t)),e(it(o))}})(o,n,t)}}function st(){return{type:Ge}}function rt(){return{type:He}}function it(e){return{type:$e,errorData:e}}function lt(e,t){return{type:We,field:e,value:t}}function gt(e,t){return{type:Ve,field:e,error:t}}function dt(e){return{type:ze,field:e}}function ct(e){return{type:qe,data:e}}function pt(){return{type:Ye}}function ut(){return{type:Ke}}let mt,ht,ft;!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bz",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="bn",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pa-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(mt||(mt={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(ht||(ht={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(ft||(ft={}));let bt={};function wt(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}const vt=e=>"ar"===e?"ar-u-nu-latn":e;class yt{constructor(){f()(this,"_locale",void 0),f()(this,"_dictionary",void 0),this._dictionary={},this._locale=mt.en}setDictionary(e){this._dictionary=e}setLocale(e){this._locale=e}getLocale(){return this._locale}toLocaleLowerCase(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}toLocaleUpperCase(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}get(e,...t){const o=e in this._dictionary?this._dictionary[e]:e;let n="";if("string"!=typeof o){const e=t[0],a=((e,t)=>{try{return(bt[e]||(bt[e]=new Intl.PluralRules(e))).select(t)}catch{return ft.OTHER}})(this._locale,parseInt(e,10)),s=o[a];void 0!==s?n=s:o.other&&(n=o.other)}else n=o;if(/%\d%/.test(n)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==t?void 0:t.length)>0)for(let e=0;e<t.length;e++){const o=t[e];if(null!=o)if("string"==typeof o)n=n.replace(`{${e}}`,wt(o)).replace(`%${e}%`,wt(o));else if("number"==typeof o){const t=this.formatNumber(o);n=n.replace(`{${e}}`,t).replace(`%${e}%`,t)}else if("object"==typeof o)for(const e of Object.keys(o)){const t=o[e];n=n.replace(`%${e}%`,wt(t))}}return n}getSeparator(){switch(this._locale){case mt.ar:return ht.AR;case mt.fa:return ht.FA;default:return ht.EN}}formatNumber(e,t){return e.toLocaleString(vt(this._locale),t)}formatNumberCompact(e,t){const o={notation:"compact",maximumFractionDigits:1};if(t){const n=new yt;return n.setLocale(t),n.formatNumber(e,o)}return this.formatNumber(e,o)}formatDate(e,t=null){const o=t||{year:"numeric",month:"long",day:"numeric"};return new Intl.DateTimeFormat(vt(this._locale),o).format(e)}formatRelativeDate(e,t=null){var o;const n=new Date(Date.now()),a=(e=new Date(e)).getTime()-n.getTime();if(Math.abs(a)<2592e6&&null!==(o=Intl)&&void 0!==o&&o.RelativeTimeFormat){const{days:e,hours:t,minutes:o,seconds:n}=(s=a,{seconds:Math.round(s/1e3),minutes:Math.round(s/1e3/60),hours:Math.round(s/1e3/60/60),days:Math.round(s/1e3/60/60/24)}),r=new Intl.RelativeTimeFormat;return e||t||o?e||t?e?r.format(e,"days"):r.format(t,"hours"):r.format(o,"minutes"):r.format(n,"seconds")}var s;return this.formatDate(e,t)}__resetForTests(){this._dictionary={},this._locale=mt.en,bt={}}}const _t=new yt,Et=2,St=3,kt=4,Ot={"auto-detect":{label:()=>_t.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>_t.get("desktop.settings.proxy.noproxy")},http:{label:()=>_t.get("desktop.settings.proxy.http")},socks4:{label:()=>_t.get("desktop.settings.proxy.socks4")},socks5:{label:()=>_t.get("desktop.settings.proxy.socks5")}},Ct=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],It="sp://proxy/v1/";const Pt="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",Tt="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",Nt="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",At="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",Dt="SETTINGS_RESTART_CLIENT_SUCCESS",Ut="SETTINGS_RESTART_CLIENT_FAILURE";function Lt(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:It}),persistent:!1,onSuccess:o=>{const n=JSON.parse(o);200!==n.status&&t(new Error(`Failed to fetch proxy settings (status code: ${n.status})`));const a=JSON.parse(n.body);e({mode:a["network.proxy.mode"],address:a["network.proxy.addr"],username:a["network.proxy.user"],password:a["network.proxy.pass"]})},onFailure:(e,o)=>{t(e)}})}))})().then((t=>{e(function(e){return{type:Pt,data:e}}(t))}),(t=>{e(function(e){return{type:Tt,error:e}}(t))}))}}function Ft(e){return t=>{(async function(e){return new Promise(((t,o)=>{const n={"network.proxy.mode":e.mode};[Et,St,kt].includes(e.mode)&&(n["network.proxy.addr"]=e.address,n["network.proxy.user"]=e.username),[Et,kt].includes(e.mode)&&(n["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:It,body:JSON.stringify(n)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{o(e)}})}))})(e).then((()=>{t({type:Nt}),t(Lt())}),(e=>{t(function(e){return{type:At,error:e}}(e))}))}}function Mt(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,o)=>{t(e)}})}))})().then((()=>{e({type:Dt})}),(t=>{e(function(e){return{type:Ut,error:e}}(t))}))}}function Rt(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function xt(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Rt(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const jt=xt(xt(xt(xt({},n),a),s),r);o(5697);class Bt extends l().Component{constructor(e){super(e),this.state={hidden:this.props.delay>0}}componentDidMount(){!0===this.state.hidden&&(this.throbberTimeout=setTimeout((()=>{this.setState({hidden:!1})}),this.props.delay))}componentWillUnmount(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}render(){return this.state.hidden?null:l().createElement("div",{className:"GlueThrobber "+(this.props.initial?"throbber-initial":"throbber")},l().createElement("div",null))}}Bt.defaultProps={delay:0,initial:!0};var Gt=o(2808),Ht=o.n(Gt);function $t(){return Ht().create().toString()}var Wt=o(8455);class Vt extends l().PureComponent{constructor(e){super(e),this.handleLoginClick=this.handleLoginClick.bind(this),this.handleErrorClick=this.handleErrorClick.bind(this)}handleLoginClick(){const e=$t();this.props.openLoginPage(e),this.props.onInteraction("login/welcome","click","open-page-login",null,e)}handleErrorClick(e){if(e.target.getAttribute("data-action")){"showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage()}}render(){const{errorMessage:e}=this.props;return l().createElement("main",{className:"Welcome"},l().createElement("h1",{className:"HeroText __welcome"},_t.get("desktop-auth.login.millions-of-songs"),l().createElement("br",null),_t.get("desktop-auth.login.free-on-spotify")),l().createElement("div",{className:"Welcome__signup-or-login"},e&&l().createElement("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive"},l().createElement(Wt.Z,{className:"Welcome__error-message__icon"}),l().createElement("span",{dangerouslySetInnerHTML:{__html:e}})),l().createElement("button",{type:"button",className:"Welcome__button button button-green button-large",id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button"},_t.get("desktop.login.LoginButton"))))}}const zt=(0,p.$j)((e=>({errorMessage:e.app.errorMessage})),(e=>({openLoginPage:t=>e(jt.enterLoginMode(t)),openSettingsPage:()=>e(jt.enterSettingsMode()),onInteraction:(t,o,n,a,s)=>e(jt.interaction(t,o,n,a,s))})))(Vt);var qt=o(7396),Yt=o(7060),Kt=o(4184),Xt=o.n(Kt);function Zt(e,t,o){if(0===t)return!1;if(!e&&!t)return!1;let n=B;switch(e){case"session":n=G;break;case"desktop_login_accounts":n=H}const a=n[t]||x;if(a.silent)return!1;const s=a.replace||[];let r="";switch(a.id){case"UnknownLoginErrorMessage":r=_t.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":r=_t.get("desktop.login.DefaultErrorMessage",s[0]);break;case"SessionTerminatedMessage":r=_t.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":r=_t.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":r=_t.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":r=_t.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":r=_t.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":r=_t.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":r=_t.get("desktop.login.ErrorProxyAuthRequired",s[0]);break;case"CriticalUpdate":r=_t.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":r=_t.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":r=_t.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":r=_t.get("desktop.login.MissingUserInfoMessage",s[0]);break;case"RegionMismatchMessage":r=_t.get("desktop.login.RegionMismatchMessage",s[0],s[1]);break;case"PremiumUsersOnlyMessage":r=_t.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":r=_t.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":r=_t.get("desktop.login.ClientUpdateFail",s[0]);break;case"FbUserNotFoundSignUp":r=_t.get("desktop.login.FbUserNotFoundSignUp",s[0])}return`${r}<br>${_t.get("desktop.login.errorCode",o)}`}function Jt({validity:e={}}){return e.valid?null:["valueMissing","typeMismatch","tooShort"].find((t=>e[t]))}const Qt=()=>l().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"}));class eo extends l().PureComponent{render(){const{errorMessage:e}=this.props;return l().createElement("div",{"aria-live":"polite",className:Xt()("FieldError",{"FieldError--hidden":!e})},l().createElement(Qt,null),l().createElement("span",null,e||""))}}let to=0;class oo extends l().PureComponent{constructor(...e){super(...e),this.idNumber=++to,this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(e)}render(){const{label:e,placeholderLabel:t,name:o,type:n,isRequired:a,taId:s,id:r,defaultValue:i,value:g,minLength:d,autoFocus:c,hasError:p,isDisabled:u,isHiddenForScreenReaders:m,useCustomStyle:h,className:f,inputClassName:b,inputRef:w,onBlur:v,onFocus:y,onInput:_,onKeyDown:E,onKeyUp:S}=this.props,k=r||`GlueTextInput-${this.idNumber}`;return l().createElement("label",{className:h?f:"GlueTextInput",htmlFor:k,"aria-label":e,"aria-hidden":!!m||void 0},l().createElement("input",{className:h?b:Xt()("GlueTextInput__input",{"GlueTextInput__input--has-error":p}),tabIndex:m?"-1":void 0,type:n,id:k,name:o,"data-ta-id":s,"aria-invalid":p,disabled:u,minLength:d,autoFocus:c,placeholder:t||e,value:i?void 0:g,defaultValue:i,onBlur:v,onFocus:y,onChange:this.handleChange,onInput:i?void 0:_,onKeyDown:E,onKeyUp:S,ref:w,required:a}))}}oo.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur(){},onFocus(){},onChange(){},onInput(){},onKeyDown(){}};class no extends l().PureComponent{constructor(e){super(e),f()(this,"handleTogglePasswordVisible",(()=>{const e=!this.state.passwordVisible;this.setState({passwordVisible:e}),this.props.onTogglePasswordVisibility&&this.props.onTogglePasswordVisibility(e)})),this.state={isEditing:!1,passwordVisible:!1},this.handleBlur=this.handleBlur.bind(this),this.handleInput=this.handleInput.bind(this)}handleBlur({target:e,relatedTarget:t}){this.setState({isEditing:!1}),t&&(t.name||"submit"===t.type)&&this.validate(e)}handleInput(){this.setState({isEditing:!0})}validate(e){const{name:t,onValidate:o,noValidate:n}=this.props;!n&&o&&o(t,Jt(e))}renderPasswordEyeToggler(){const{type:e}=this.props,{passwordVisible:t}=this.state;return"password"!==e?null:l().createElement(l().Fragment,null,l().createElement("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon "+(t?"passwordVisible":"")}),l().createElement("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross "+(t?"passwordVisible":"")}))}render(){const{error:e={},noValidate:t,label:o,name:n,type:a,value:s,isRequired:r,minLength:i,autoFocus:g,isDisabled:d,onChange:c,onKeyUp:p,onFocus:u,rightIcon:m=null}=this.props,{isEditing:h,passwordVisible:f}=this.state,b=m;let w=a;return"password"===a&&f&&(w="text"),l().createElement("div",{className:Xt()("FormField",{"FormField--no-validate":t})},l().createElement(oo,{label:o,name:n,type:w,taId:`${n}-field`,value:s,isRequired:r,minLength:i,autoFocus:g,hasError:!!e.message&&!h,isDisabled:d,onChange:c,onFocus:u,onKeyUp:p,onBlur:this.handleBlur,onInput:this.handleInput}),b&&l().createElement(b,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!t&&!h&&e.message&&l().createElement(l().Fragment,null,l().createElement(eo,{errorMessage:e.message})))}}const ao=(0,p.$j)((()=>({})),(()=>({})))(no);var so=o(7154),ro=o.n(so);const io=["type","name","label","classes","hasError"];class lo extends l().PureComponent{constructor(...e){super(...e),this.handleBlur=this.handleBlur.bind(this)}handleBlur(e={}){this.props.onBlur&&this.props.onBlur(e)}render(){const e=this.props,{type:t="text",name:o,label:n,classes:a,hasError:s}=e,r=Oe()(e,io),i=`${o}-field`;return l().createElement("span",{className:a},l().createElement("label",{className:"glue-hidden-visually",htmlFor:i},n),l().createElement("input",ro()({},r,{onBlur:this.handleBlur,type:t,name:o,id:i,"data-ta-id":i,className:Xt()("form-control Input",{"Input--has-error":s}),"aria-invalid":!!s,placeholder:n,required:!0})))}}const go=(e,t,o)=>{let n=null;return((e,t,o)=>[e,t,o].reduce(((e,t)=>e&&!!t),!0))(e,t,o)?((e,t,o)=>{const n=new Date(o,t-1,e);return n.getDate()===e&&n.getMonth()===t-1&&n.getFullYear()===o})(e,t,o)||(n="invalid"):n="incomplete",n};function co(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function po(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?co(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):co(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const uo={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"};class mo extends l().PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.monthStrings=[_t.get("desktop.login.January"),_t.get("desktop.login.February"),_t.get("desktop.login.March"),_t.get("desktop.login.April"),_t.get("desktop.login.May"),_t.get("desktop.login.June"),_t.get("desktop.login.July"),_t.get("desktop.login.August"),_t.get("desktop.login.September"),_t.get("desktop.login.October"),_t.get("desktop.login.November"),_t.get("desktop.login.December")],this.handleInput=this.handleInput.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleInput({target:{name:e,value:t,validity:o={}}}){this.setState({isEditing:!0}),o.valueMissing?this.props.onChange(po(po({},this.props.value),{},{[e]:void 0})):(o.valid||o.rangeUnderflow)&&this.props.onChange(po(po({},this.props.value),{},{[e]:parseInt(t,10)}))}handleBlur(e){const t=e.relatedTarget?e.relatedTarget.name:null,o=["day","month","year"].includes(t);this.setState({isEditing:o}),o||this.validate()}handleFocus(e){this.setState({isEditing:!0});const t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}validate(){const{day:e,month:t,year:o}=this.props.value,n=go(e,t,o,this.props.minAge);this.props.onValidate("birthDate",n)}renderYear(e,t,o){return l().createElement(lo,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:_t.get("desktop.login.Year"),autoFocus:o,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1900,hasError:t.includes("year"),onFocus:this.handleFocus})}renderMonth(e,t,o){return l().createElement("select",{name:"month",id:"month-field",className:Xt()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:o,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus},l().createElement("option",{value:"",disabled:!0,hidden:!0},_t.get("desktop.login.Month")),this.monthStrings.map(((e,t)=>l().createElement("option",{value:t+1,key:t},e))))}renderDay(e,t,o){return l().createElement(lo,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:_t.get("desktop.login.Day"),autoFocus:o,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}render(){const{name:e,label:t,dateEndianness:o,error:n={},autoFocus:a}=this.props,{day:s,month:r,year:i}=this.props.value,{isEditing:g}=this.state,d=["day","month","year"].filter((e=>!(g||!n.message)&&("incomplete"===n.code?!this.props.value[e]:"tooOld"!==n.code||"year"===e)));let c="";return c="big"===uo[o]?l().createElement("div",{className:"FormDate__inputs"},this.renderYear(i,d,a),this.renderMonth(r,d),this.renderDay(s,d)):"little"===uo[o]?l().createElement("div",{className:"FormDate__inputs"},this.renderDay(s,d,a),this.renderMonth(r,d),this.renderYear(i,d)):l().createElement("div",{className:"FormDate__inputs"},this.renderMonth(r,d,a),this.renderDay(s,d),this.renderYear(i,d)),l().createElement("div",{className:"FormDate"},l().createElement("label",{className:`FormDate__label ${e}-label`,htmlFor:"month-field"},t),c,!g&&n.message&&l().createElement(l().Fragment,null,l().createElement(eo,{errorMessage:n.message})))}}mo.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const ho=(0,p.$j)((()=>({})),(()=>({})))(mo),fo=["name","label","options","value","showTitle","error","onValidate","onOptionFocus"];class bo extends l().PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleBlur(e){this.state={isEditing:!1};(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}handleFocus(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}validate(e){const{name:t,onValidate:o}=this.props;o&&o(t,Jt(e))}render(){const e=this.props,{name:t,label:o,options:n,value:a,showTitle:s,error:r={},onValidate:i,onOptionFocus:g}=e,d=Oe()(e,fo),{isEditing:c}=this.state,p=`${t}-field`,u=Xt()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return l().createElement("div",{className:u},l().createElement("label",{className:s?"":"glue-hidden-visually",htmlFor:p},o),n.map((e=>{const o=`${e.value}-radio`;return l().createElement("span",{className:a===e.value?"checked":"",key:e.value},l().createElement("input",ro()({},d,{name:t,type:"radio",id:o,className:"glue-hidden-visually",value:e.value,checked:a===e.value,onBlur:this.handleBlur,onFocus:this.handleFocus,required:!0,disabled:this.props.disabled})),l().createElement("label",{className:Xt()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!r.message}),htmlFor:o},e.label))})),!c&&r.message&&l().createElement(l().Fragment,null,l().createElement(eo,{errorMessage:r.message})))}}const wo=(0,p.$j)((()=>({})),(()=>({})))(bo);class vo extends l().PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.isDisabled||this.props.onChange(e.target.checked)}render(){const e=`${this.props.name}-field`,t=Xt()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return l().createElement("div",{className:t},l().createElement("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),l().createElement("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}}))}}vo.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange(){}};var yo=o(9717);class _o extends l().Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){if(e.target.getAttribute("data-action")){const t=e.target.getAttribute("data-action");"showSettings"===t?this.props.openSettingsPage():"showSignup"===t&&this.props.openSignupPage()}}render(){const e=this.props.errorData,t=e?Zt(e.errorCategory,e.errorCode,e.errorReference):null;return t?l().createElement("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick},l().createElement(yo.w,{iconSize:24}),l().createElement("span",{dangerouslySetInnerHTML:{__html:t}})):null}}const Eo=(0,p.$j)((e=>{let{mode:t}=e.app;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(e=>({openSettingsPage:()=>e(jt.enterSettingsMode()),openSignupPage:()=>e(jt.openSignupPage())})))(_o);class So extends l().PureComponent{static getNextId(){const e=(So.instanceCount||0)+1;return So.instanceCount=e,e}constructor(e){super(e),this.state={tosAgreed:!1,privacyAgreed:!1},this.handleTosChange=this.handleTosChange.bind(this),this.handlePrivacyChange=this.handlePrivacyChange.bind(this),this.handleTosAndPrivacyChange=this.handleTosAndPrivacyChange.bind(this),this.handleEulaChange=this.handleEulaChange.bind(this),this.eulaId=So.getNextId()}handleTosChange(e){this.setState({tosAgreed:e},(()=>{this.handleEulaChange()}))}handlePrivacyChange(e){this.setState({privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleTosAndPrivacyChange(e){this.setState({tosAgreed:e,privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleEulaChange(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}render(){let e=null;const t=`<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">${_t.get("desktop.login.TermsAndConditions")}</a>`,o=`<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">${_t.get("desktop.login.PrivacyPolicy")}</a>`,n=_t.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?l().createElement("div",null,!this.props.hideTermsAndConditions&&l().createElement("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.SignupAgree",n,t)}}),!this.props.hidePrivacyPolicy&&l().createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.PrivacyPolicyAgree",o)}})):this.props.restrictions.can_accept_licenses_in_one_step?l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(vo,{"data-ta-id":"agree-eula",name:`agree-eula-${this.eulaId}`,label:this.props.restrictions.specific_licenses?_t.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,o):_t.get("desktop.login.SignupAgreeCheckbox",t,o),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&l().createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.PrivacyPolicyAgree",o)}})):l().createElement("div",null,l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(vo,{"data-ta-id":"agree-tos",name:`agree-tos-${this.eulaId}`,label:_t.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})),l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(vo,{"data-ta-id":"agree-privacy",name:`agree-privacy-${this.eulaId}`,label:_t.get("desktop.login.PrivacyPolicyAgreeCheckbox",o),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled}))),l().createElement("div",{className:"EulaAgreement"},e,this.props.error&&l().createElement(l().Fragment,null,l().createElement(eo,{errorMessage:this.props.error.message})))}}const ko=(0,p.$j)((()=>({})),(()=>({})))(So);class Oo extends l().PureComponent{constructor(...e){super(...e),f()(this,"handleClick",(e=>{const{method:t}=this.props;e&&(e.preventDefault(),e.stopPropagation()),this.props.onClick(t)}))}render(){const{type:e,label:t,isDisabled:o,method:n}=this.props,a=n.substr(0,1).toUpperCase()+n.substr(1),s=Xt()("button","SocialButton",`${a}Button`,{[`${a}Button--login`]:"login"===e,[`${a}Button--signup`]:"signup"===e});return l().createElement("button",{type:"button",className:s,onClick:this.handleClick,"data-ta-id":`${n}-${e}-button`,disabled:o},t)}}function Co(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Io(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Co(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class Po extends l().PureComponent{constructor(e){super(e),f()(this,"handleAgreeEulaChange",(e=>{const t=e?"checked":"unchecked";this.props.onInteraction("signup","click",`eula-change-${t}`),this.setState({eulaAgreed:e,error:e?{}:this.state.error})})),f()(this,"handleOnClick",((...e)=>{(()=>this.state.eulaAgreed||this.props.restrictions.pretick_eula||this.props.hideEula)()?this.props.onClick(...e):this.setState({error:{message:_t.get("desktop.login.agreeEula.notAccepted")}})})),this.state={eulaAgreed:this.props.restrictions.pretick_eula,error:{}}}render(){return l().createElement("div",{className:"SignupFacebook"},l().createElement(Oo,{method:"facebook",isDisabled:this.props.isDisabled,onClick:this.handleOnClick,type:"signup",label:_t.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:l().createElement(ko,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange}))}}f()(Po,"defaultProps",{isDisabled:!1,hideEula:!1});const To=(0,p.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})),(e=>({onInteraction:(t,o,n,a,s)=>e(jt.interaction(t,o,n,a,s)),onClick:t=>{const o=$t();e(jt.signupWithAccounts(t,o)),e(jt.interaction("signup","click",`create-account-${t}`,null,o))}})),((e,t)=>Io(Io(Io({},e),t),{},{onClick:e=>{t.onClick(e)}})))(Po),No=({title:e})=>l().createElement("p",{className:"FormTitleSeparator","aria-hidden":"true"},e);No.defaultProps={title:""};const Ao=No;class Do extends l().PureComponent{constructor(e){super(e),f()(this,"handleEmailValidate",((e,t)=>{this.props.onValidate(e,t),t||this.props.validateEmail()})),f()(this,"handleEmailFocus",(()=>{this.props.onInteraction("signup","click","input-email")})),f()(this,"handlePasswordValidate",((e,t)=>{this.props.onValidate(e,t),t||this.props.validatePassword()})),f()(this,"handlePasswordFocus",(()=>{this.props.onInteraction("signup","click","input-password")})),f()(this,"handleNameFocus",(()=>{this.props.onInteraction("signup","click","input-name")})),f()(this,"handleGenderOptionFocus",(e=>{this.props.onInteraction("signup","click",`input-gender-${e}`)})),f()(this,"handleInputChange",(({target:{name:e,value:t}})=>{this.props.updateData({[e]:t}),this.setState({isEditing:!0})})),f()(this,"handleBirthDateChange",(e=>{this.props.updateData({birthDate:e})})),f()(this,"handleSendEmailChange",(e=>{this.props.updateData({sendEmail:e})})),f()(this,"handleShareDataChange",(e=>{this.props.updateData({shareData:e})})),f()(this,"handleAgreeEulaChange",(e=>{this.props.updateData({agreeEula:e})})),f()(this,"handleSubmit",(e=>{e&&e.preventDefault();const{step:t}=this.props,o=$t();this.props.onInteraction("signup","click",0===t?"continue":"create-account",null,o),this.setState({isEditing:!1});let n=!0;const a={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!this.props.errors&&Object.keys(this.props.errors).filter((e=>-1!==a[t].indexOf(e))).some((e=>this.props.errors[e]&&this.props.errors[e].message))&&(n=!1);const s=e=>t=>{this.props.data[t]||(this.props.onValidate(t,{code:e}),n=!1)};switch(t){case 0:["email","password","name"].forEach(s("valueMissing"));break;case 1:{const{day:e,month:t,year:a}=this.props.data.birthDate;a||this.props.onInteraction("signup","view","show-error-empty-year",null,o),t||this.props.onInteraction("signup","view","show-error-empty-month",null,o),e||this.props.onInteraction("signup","view","show-error-empty-date",null,o);const r=go(e,t,a,this.props.restrictions.minimum_age);r&&(this.props.onValidate("birthDate",{code:r}),n=!1),s("valueMissing")("gender"),s("notAccepted")("agreeEula")}}if(n)switch(t){case 0:this.setStep(t+1);break;case 1:this.props.signup(o)}})),f()(this,"handleBack",(()=>{const{step:e}=this.props;this.props.onInteraction("signup","click",`back-step-${e+1}`),this.props.clearAllErrors(),e<=0?this.props.enterWelcomeMode():this.setStep(e-1)})),f()(this,"handleLogin",(()=>{const e=$t();this.props.onInteraction("signup","click","open-page-login",null,e),this.props.enterLoginMode(e)})),f()(this,"setStep",(e=>{switch(e){case 0:this.props.enterSignupModeStep0();break;case 1:this.props.enterSignupModeStep1()}})),this.state={isEditing:!0}}renderErrorMsg(){const e=Object.keys(this.props.errors).filter((e=>this.props.errors[e]&&this.props.errors[e].message));return l().createElement("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive"},e.length>0?l().createElement("div",null,l().createElement("p",null,_t.get("desktop.login.email.errorMessageA11y",e.length)),l().createElement("ul",null,e.map((e=>l().createElement("li",{key:e},this.props.errors[e].message))))):null)}renderStep0(){const{data:e,errors:t,isDisabled:o,onValidate:n}=this.props;return l().createElement("div",null,l().createElement(ao,{name:"email",type:"email",label:_t.get("desktop.login.SignupEmail"),value:e.email,onChange:this.handleInputChange,isDisabled:o,error:t.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:qt.w}),l().createElement(ao,{name:"password",type:"password",label:_t.get("desktop.login.CreateAPassword"),value:e.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:o,error:t.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:e=>{this.props.onInteraction("signup","click",e?"toggle-password-visibility-show":"toggle-password-visibility-hide")}}),l().createElement(ao,{name:"name",label:_t.get("desktop.login.SignupName"),value:e.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:o,error:t.name,onValidate:n,rightIcon:Yt.K,onFocus:this.handleNameFocus}))}renderStep1(){const{data:e,errors:t,restrictions:o,isDisabled:n,onValidate:a}=this.props;let s=null;o.requires_marketing_opt_in_text?s=l().createElement("div",{className:"SignupForm__send-email-implicit"},_t.get("desktop.login.SendEmailImplicitLabel")):o.requires_marketing_opt_in&&(s=l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(vo,{name:"send-email",label:_t.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:e.sendEmail,isDisabled:n})));const r=[{label:_t.get("desktop.login.Female"),value:"female"},{label:_t.get("desktop.login.Male"),value:"male"}];return o.use_all_genders&&r.push({label:_t.get("desktop.login.NonBinary"),value:"neutral"}),l().createElement("div",null,l().createElement(ho,{name:"birth-date",label:_t.get("desktop.login.WhatsYourSignupBirthDate"),value:e.birthDate,onChange:this.handleBirthDateChange,disabled:n,error:t.birthDate,onValidate:a,dateEndianness:o.date_endianness,minAge:o.minimum_age,autoFocus:!0,onFocus:()=>{this.props.onInteraction("signup","click","input-birth-date")}}),l().createElement(wo,{showTitle:!0,name:"gender",label:_t.get("desktop.login.WhatsYourSignupGender"),options:r,value:e.gender,onChange:this.handleInputChange,disabled:n,error:t.gender,onValidate:a,onOptionFocus:this.handleGenderOptionFocus}),s,l().createElement(ko,{restrictions:o,error:t.agreeEula,disabled:n,onChange:this.handleAgreeEulaChange}))}render(){const{isDisabled:e,step:t}=this.props;return l().createElement("form",{onSubmit:this.handleSubmit,className:"SignupForm"},this.renderErrorMsg(),l().createElement(Eo,null),0===t?this.renderStep0():"",1===t?this.renderStep1():"",l().createElement("button",{type:"submit",className:"button button-green button-large SignupForm__signup-button",disabled:e,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit"},0===t?_t.get("desktop.login.Continue"):_t.get("desktop.login.SignupButton")),0===t&&l().createElement(l().Fragment,null,l().createElement(Ao,{title:_t.get("desktop.login.SignupOr")}),l().createElement(To,null)),l().createElement("a",{href:"#",className:"SignupForm__back-button",onClick:this.handleBack},_t.get("desktop.login.Back")),0===t&&l().createElement("h3",{className:"FooterFormText"},l().createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:_t.get("desktop.login.AlreadyOnSpotifyLogin")}})))}}f()(Do,"defaultProps",{errors:{},data:{},step:0});const Uo=(0,p.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData})),(e=>({signup:t=>e(jt.signup(t)),enterLoginMode:()=>e(jt.enterLoginMode()),enterSignupModeStep0:()=>e(jt.enterSignupModeStep0()),enterSignupModeStep1:()=>e(jt.enterSignupModeStep1()),updateData:t=>e(jt.updateSignupData(t)),validateEmail:()=>e(jt.validateField("email")),validatePassword:()=>e(jt.validateField("password")),enterWelcomeMode:()=>e(jt.enterWelcomeMode()),clearAllErrors:()=>e(jt.clearAllErrors()),onValidate:(t,o)=>{if(o){const n=o.code||o,a={birthDate:{incomplete:_t.get("desktop.login.birthDate.incomplete"),invalid:_t.get("desktop.login.birthDate.invalid")},password:{valueMissing:_t.get("desktop.login.password.valueMissing"),tooShort:_t.get("desktop.login.password.tooShort")},email:{valueMissing:_t.get("desktop.login.email.valueMissing"),typeMismatch:_t.get("desktop.login.email.typeMismatch")},name:{valueMissing:_t.get("desktop.login.name.valueMissing")},gender:{valueMissing:_t.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:_t.get("desktop.login.agreeEula.notAccepted")}};e(jt.validateFieldFailure(t,{code:n,message:a[t]&&a[t][n]||""}))}else e(jt.validateFieldSuccess(t))},onInteraction:(t,o,n,a,s)=>e(jt.interaction(t,o,n,a,s))})))(Do);class Lo extends l().PureComponent{render(){const{step:e,restrictions:t}=this.props;if(!t)return l().createElement(Bt,{delay:2e3});const o=0===e?_t.get("desktop.login.SignupHeroText"):_t.get("desktop.login.SignupAlmostDone");return l().createElement("main",{className:"Signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form"},l().createElement("h1",{className:"HeroText",id:"signup-form-title"},o),l().createElement(Uo,{step:e}))}}const Fo=(0,p.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})))(Lo);class Mo extends l().PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}render(){const{isActive:e,isDisabled:t,labelId:o,taId:n}=this.props;return l().createElement("div",{className:Xt()("GlueToggle",{"GlueToggle--is-active":e,"GlueToggle--is-disabled":t})},l().createElement("input",{type:"checkbox",name:o,id:o,className:"glue-hidden-visually",onChange:this.handleChange,checked:e,disabled:t,"data-ta-id":n}),l().createElement("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true"},l().createElement("div",{className:"GlueToggle__toggle-inner"})))}}Mo.defaultProps={isActive:!1,isDisabled:!1,onChange:()=>{}};class Ro extends l().PureComponent{render(){const{name:e,label:t,checked:o,disabled:n,onChange:a}=this.props,s=`${e}-field`;return l().createElement("div",{className:"FormToggle"},l().createElement("label",{htmlFor:s,"data-ta-id":"remember-me-label"},t),l().createElement(Mo,{labelId:s,isActive:o,onChange:a,taId:"remember-me-slider",isDisabled:n}))}}class xo extends l().PureComponent{constructor(e){super(e),f()(this,"handleForgotPasswordLinkClick",(()=>{this.props.onInteraction("login","click","reset-password")})),this.state={username:this.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((e=>{this[e]=this[e].bind(this)}))}handleUsernameChange({target:e}){this.setState({username:e.value})}handleUsernameFocus(){this.props.onInteraction("login","click","input-email")}handlePasswordChange({target:e}){this.setState({password:e.value})}handlePasswordFocus(){this.props.onInteraction("login","click","input-password")}handleRememberMeChange(){this.setState({rememberMe:!this.state.rememberMe})}handleSubmit(e){e&&e.preventDefault();const t=this.state.username.trim(),{password:o,rememberMe:n}=this.state,a=$t();this.props.onInteraction("login","click","login-email",null,a),t&&o?this.props.login({username:t,password:o,rememberMe:n},!1,a):t?o||this.props.onInteraction("login","view","show-error-empty-password",null,a):this.props.onInteraction("login","view","show-error-empty-email",null,a)}render(){const{isDisabled:e}=this.props;return l().createElement("form",{onSubmit:this.handleSubmit},l().createElement("h3",{className:"glue-hidden-visually"},_t.get("desktop.login.LoginWithEmailTitle")),l().createElement(Eo,null),l().createElement(ao,{name:"username",label:_t.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:qt.w}),l().createElement(ao,{name:"password",type:"password",label:_t.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),l().createElement("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick},_t.get("desktop.login.forgotPassLink")),l().createElement(Ro,{name:"remember-me",label:_t.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),l().createElement("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button"},_t.get("desktop.login.LoginButton")))}}const jo=(0,p.$j)((e=>({isDisabled:!!e.login.loginInProgress,username:e.login.username})),(e=>({login:(t,o,n)=>e(jt.login(t,o,n)),onInteraction:(t,o,n,a,s)=>e(jt.interaction(t,o,n,a,s))})))(xo);function Bo(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Go(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Bo(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Bo(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}class Ho extends l().PureComponent{componentWillUnmount(){this.props.clearErrors()}handleSignup(){const e=$t();this.props.enterSignupMode(e),this.props.onInteraction("login","click","open-page-signup",null,e)}getSignupLink(){return l().createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignup(),"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.DontHaveAnAccountSignup")}})}render(){const{isDisabled:e}=this.props;return l().createElement("main",{className:"Login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form"},l().createElement("h1",{className:"HeroText",id:"login-form-title"},_t.get("desktop.login.LoginHeroText")),l().createElement(jo,null),l().createElement(Ao,{title:_t.get("desktop.login.SignupOr")}),l().createElement(Oo,{method:"facebook",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithFacebook")}),l().createElement(Oo,{method:"google",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithGoogle")}),l().createElement(Oo,{method:"apple",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:_t.get("desktop.login.ContinueWithApple")}),l().createElement("h3",{className:"FooterFormText"},this.getSignupLink()))}}const $o=(0,p.$j)((e=>({isDisabled:!!e.login.loginInProgress})),(e=>({enterSignupMode:t=>e(jt.enterSignupMode(t)),onInteraction:(t,o,n,a,s)=>e(jt.interaction(t,o,n,a,s)),onSocialButtonClick:t=>{const o=$t();e(jt.loginWithAccounts(t,o)),e(jt.interaction("login","click",`login-${t}`,null,o))},clearErrors:()=>e(jt.loginClearErrors())})),((e,t)=>Go(Go(Go({},e),t),{},{onSocialButtonClick:e=>{t.onSocialButtonClick(e)}})))(Ho);class Wo extends l().PureComponent{render(){const{operationUsed:e}=this.props,t="signup"===e?_t.get("desktop-auth.login.redirecting-to-browser-signup"):_t.get("desktop-auth.login.redirecting-to-browser-login");return l().createElement("main",null,l().createElement("h1",{className:"HeroText __redirect"},t))}}const Vo=(0,p.$j)((e=>({operationUsed:e.experimentWebAuthReducer.operationUsed})))(Wo);var zo=o(7945);const qo={button:"Qt5xfSWikz6CLU8Vobxs","button-primary":"pWY0RsrzxnQm9yHtovC8","button-secondary":"jzic9t5dn38QUOYlDka0","button-outlined":"X7lQWw2Ly_RZVPEFj2QY","button-tertiary":"NKswMkKwGl8FphQQVSEb","btn-block":"Ki84cEjfUZwLueXLtLO2"},Yo=e=>l().createElement("button",{id:e.id,className:Xt()(qo.button,qo[`button-${e.version}`],e.className,{[qo["btn-block"]]:e.block}),type:"button",onClick:e.onClick,disabled:e.disabled,"aria-label":e.ariaLabel,"aria-hidden":e.standalone,"data-testid":e.testID,title:e.title},e.children);Yo.defaultProps={onClick:()=>{}};const Ko=e=>{const t={className:Xt()(qo.button,qo[`button-${e.version}`],e.className,{[qo["btn-block"]]:e.block}),title:e.title,draggable:e.draggable||!1,onClick:e.onClick,"data-testid":e.testID};return e.href?l().createElement("a",ro()({},t,{target:e._blank?"_blank":"_self",href:e.href}),e.children):e.linkTo?l().createElement(zo.rU,ro()({},t,{to:e.linkTo}),e.children):l().createElement(Yo,e,e.children)};Yo.defaultProps={onClick:()=>{}};const Xo="zrvvPyoxE6wQNqnu0yWA",Zo=({value:e,id:t,children:o,disabled:n,onSelect:a,className:s,dir:r})=>l().createElement("span",{className:s},l().createElement("select",{className:Xo,value:null==e?void 0:e.toString(),id:t,disabled:n,onBlur:()=>{},onChange:e=>{a(e.target.value)},dir:r},o)),Jo={horizontalPair:"TIU9DuYaVxHVHSUb050e",ProxySettings:"HAqO2XB1kc4cGIDulu92",fullWidth:"ykqMpIHvpnF6XjtvEnAB",proxyInput:"Ex5qZvK9ck_COzwudreW",labelStretch:"LRqmVJV9oEKbTo6IyIjh",restartAppButton:"UwXx1VsrVwaSHruCIAi3",title:"X69rF0dyTnC9Dr4E1N8J"};var Qo=o(1124);const en=({id:e,type:t,placeHolder:o,inputRef:n,handleOnChange:a})=>l().createElement("input",{type:t||"text",id:e,"data-testid":e,className:Jo.proxyInput,placeholder:o,ref:n,onChange:a}),tn=({children:e,label:t})=>l().createElement(Qo.cw,{label:t},e),on={isBook:"q8JtWrg1WCUrFY2MzOBq",isBold:"PKVTHA5io1M8d45i8zTV",isBlack:"DWwTfiq5mV0rxLXge_LQ",isCondensed:"vXyG7FBt6UnUpSuQ94KF",bass:"Afp2Urf1F4Ub6nHGSF9i",forte:"iXZwF9JkkOC9IgDBajxr",brio:"fobxZOE9C5TZqLIxWcfk",alto:"jDhY6c7obZ6QMTKlZM_w",canon:"wAEzJUGDXfAUyDe6nzIW",cello:"xP6C4l_KlGJB3UxIOfuS",ballad:"w_Xs9cRXMwmQHw8BpiID",balladBold:"JSkXrK3CXFYeDgTW8iHv",mesto:"Hi9FqPX1LNRRPf31tfA8",mestoBold:"Czg_RoYmXG0FPTHG9Kdb",metronome:"RhEgafyO2x0bdAfxpfWg",finale:"SYnLm8pwZls9sOX9AvJZ",finaleBold:"QanBr97fzoAzu_w84Vlk",minuet:"w5r2OGxHEeky6qGeckXf",minuetBold:"gvMYy0vqOxuYtbOkc6sH",viola:"hiafLxik6ZwVSfnqHxkV",violaBold:"g2bPkRAC0wiu9xTnwWsr"};var nn=o(3012);const an=["color","variant","condensed","weight","className"];function sn(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function rn(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):sn(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}let ln,gn;!function(e){e.bass="bass",e.forte="forte",e.brio="brio",e.alto="alto",e.canon="canon",e.cello="cello",e.ballad="ballad",e.balladBold="balladBold",e.viola="viola",e.violaBold="violaBold",e.mesto="mesto",e.mestoBold="mestoBold",e.metronome="metronome",e.minuet="minuet",e.minuetBold="minuetBold",e.finale="finale",e.finaleBold="finaleBold"}(ln||(ln={})),function(e){e.book="book",e.bold="bold",e.black="black"}(gn||(gn={}));const dn=l().forwardRef(((e,t)=>{let{color:o,variant:n=ln.ballad,condensed:a,weight:s,className:r}=e,i=Oe()(e,an);const g=(e=>void 0!==e&&Object.prototype.hasOwnProperty.call(nn.$_Y,e))(o)?nn.$_Y[o]:o,d=on[n],c=i.as?i.as:"span";return l().createElement(c,ro()({className:Xt()(r,{[d]:!!d,[on.isBook]:s===gn.book,[on.isBold]:s===gn.bold,[on.isBlack]:s===gn.black,[on.isCondensed]:a}),style:{color:g||""},ref:t},i))})),cn=rn(rn(rn({},{h1:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"h1",ref:t},e)))),h2:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"h2",ref:t},e)))),h3:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"h3",ref:t},e)))),h4:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"h4",ref:t},e)))),h5:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"h5",ref:t},e)))),h6:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"h6",ref:t},e)))),p:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"p",ref:t},e)))),small:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"small",ref:t},e)))),li:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"li",ref:t},e)))),span:l().forwardRef(((e,t)=>l().createElement(dn,ro()({as:"span",ref:t},e))))}),ln),gn),pn=Object.assign(dn,cn),un=(e,t,o)=>{let n=`${e}:${t}`;switch(o){case Et:n+="@http";break;case St:n+="@socks4";break;case kt:n+="@socks5"}return n},mn=({addr:e,mode:t,pass:o,user:n,setValue:a,restartContainer:s,fullWidth:r})=>{const g=(0,i.useRef)(null),d=(0,i.useRef)(null),c=(0,i.useRef)(null),p=(0,i.useRef)(null),[u,m]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[b,w]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const[t,o]=(null==e?void 0:e.split(/[:@]+/))||["",""];m(t),f(o),g.current&&(g.current.value=t),d.current&&(d.current.value=o)}),[e]),(0,i.useEffect)((()=>{p.current&&o&&(p.current.value=o.toString())}),[o]),(0,i.useEffect)((()=>{c.current&&n&&(c.current.value=n.toString())}),[n]);const v=(0,i.useCallback)((({target:e})=>{const o=un(e.value,h,t||0);m(e.value),a("network.proxy.addr",o),w(!0)}),[t,h,a]),y=(0,i.useCallback)((({target:e})=>{const o=un(u,e.value,t||0);f(e.value),a("network.proxy.addr",o),w(!0)}),[t,u,a]),_=(0,i.useCallback)((({target:e})=>{a("network.proxy.user",e.value),w(!0)}),[a]),E=(0,i.useCallback)((({target:e})=>{a("network.proxy.pass",e.value),w(!0)}),[a]),S=0!==t&&1!==t,k=t!==St;return l().createElement("div",{className:[Jo.ProxySettings,r?Jo.fullWidth:""].join(" ")},l().createElement(pn,{as:"h2",variant:pn.cello,className:Jo.title},_t.get("desktop.settings.proxy.title")),l().createElement(tn,{label:_t.get("desktop.settings.proxy.type")},l().createElement(Zo,{className:Jo.secondColumn,id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);a("network.proxy.mode",t),w(!0)}},Ct.map((({enumKey:e,enumValue:t})=>l().createElement("option",{key:e,value:t,"data-testid":e},Ot[e]?Ot[e].label():""))))),S?l().createElement(l().Fragment,null,l().createElement("div",{className:Jo.horizontalPair},l().createElement(tn,{label:_t.get("desktop.settings.proxy.host")},l().createElement(en,{id:"network.proxy.host",handleOnChange:v,placeHolder:_t.get("desktop.settings.proxy.host"),inputRef:g})),l().createElement(tn,{label:_t.get("desktop.settings.proxy.port")},l().createElement(en,{id:"network.proxy.port",type:"number",handleOnChange:y,placeHolder:_t.get("desktop.settings.proxy.port"),inputRef:d}))),l().createElement("div",{className:k?Jo.horizontalPair:void 0},l().createElement(tn,{label:_t.get("desktop.settings.proxy.user")},l().createElement(en,{id:"network.proxy.user",handleOnChange:_,placeHolder:_t.get("desktop.settings.proxy.user"),inputRef:c})),k?l().createElement(tn,{label:_t.get("desktop.settings.proxy.pass")},l().createElement(en,{id:"network.proxy.pass",handleOnChange:E,placeHolder:_t.get("desktop.settings.proxy.pass"),type:"password",inputRef:p})):null)):null,b&&l().createElement(Ko,{className:Jo.restartAppButton,version:"outlined",onClick:s},_t.get("settings.restartApp")))};function hn(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}const fn=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const bn=(0,p.$j)((e=>({settings:{proxy:e.settings.proxy}})),(e=>({fetchProxySettings(){e(jt.fetchProxySettings())},updateProxySettings(t){e(jt.updateProxySettings(t))},restartClient(){e(jt.restartClient())}})))((({settings:e={proxy:{mode:0,address:"",username:"",password:""}},fetchProxySettings:t=(()=>{}),updateProxySettings:o=(()=>{}),restartClient:n=(()=>{})})=>{(0,i.useEffect)((()=>{t()}),[t]);const a=(0,i.useCallback)(((t,n)=>{if(function(e){return!!fn.includes(e)}(t)){const a=function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?hn(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):hn(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({},e.proxy);switch(t){case"network.proxy.mode":a.mode=n;break;case"network.proxy.addr":a.address=n;break;case"network.proxy.user":a.username=n;break;case"network.proxy.pass":a.password=n}o(a)}return Promise.resolve()}),[e,o]);return l().createElement("main",{className:"Settings","aria-labelledby":"settings-form-title"},l().createElement("h1",{className:"HeroText",id:"settings-form-title"},_t.get("desktop.login.PreferencesLink")),l().createElement(mn,{mode:e.proxy.mode,addr:e.proxy.address,user:e.proxy.username,pass:e.proxy.password,setValue:a,restartContainer:n,fullWidth:!0}))}));class wn extends l().PureComponent{constructor(e){super(e),this.handleSettingsClick=this.goToSettingsPage.bind(this),this.handleBackToLoginClick=this.handleBackToLoginClick.bind(this)}handleSignupClick(){const{openSignupPage:e,onInteraction:t}=this.props,o=$t();e(o),t("login/welcome","click","open-page-signup",null,o)}handleBackToLoginClick(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}goToSettingsPage(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}renderPreferencesLink(){return l().createElement("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings"},_t.get("desktop.login.PreferencesLink"))}renderBackToLoginLink(){return l().createElement("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login"},_t.get("desktop.login.Back"))}renderTryAgain(){return l().createElement(l().Fragment,null,l().createElement("span",null,_t.get("desktop-auth.login.not-seeing-browser"))," ",l().createElement("a",{href:"#",onClick:()=>this.props.tryAgainHandler()},_t.get("desktop-auth.login.try-again")))}renderSignupLink(){return l().createElement("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignupClick(),"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:_t.get("desktop.login.DontHaveAnAccountSignup")}})}render(){const{mode:e}=this.props;return l().createElement("footer",{className:"Footer",role:"contentinfo"},"login"===e&&this.renderPreferencesLink(),"settings"===e&&this.renderBackToLoginLink(),"open-browser"===e&&this.renderTryAgain(),"welcome"===e&&this.renderSignupLink())}}const vn=(0,p.$j)((()=>({})),(e=>({tryAgainHandler:()=>{e(jt.abortLoginWithAccounts()),e(jt.enterWelcomeMode())},openLoginPage:()=>{e(jt.enterLoginMode())},openSignupPage:t=>e(jt.enterSignupMode(t)),openSettingsPage:()=>e(jt.enterSettingsMode()),onInteraction:(t,o,n,a,s)=>e(jt.interaction(t,o,n,a,s))})))(wn);class yn extends l().PureComponent{render(){return l().createElement("header",{className:"Header"},l().createElement("h1",{className:"glue-hidden-visually"},"Spotify"),l().createElement("img",{className:"Header__logo",src:"images/logo.svg",alt:""}))}}var _n=o(1226),En=o(5989);class Sn extends l().Component{renderFakeWebPlayer(){return l().createElement("div",{className:"fakeWebPlayer"},l().createElement("aside",null),l().createElement("footer",null,l().createElement("div",{className:"fakeWebPlayer__footer-left"}),l().createElement("div",{className:"fakeWebPlayer__footer-center"}),l().createElement("div",{className:"fakeWebPlayer__footer-right"})),l().createElement("main",null,l().createElement("div",{className:"fakeWebPlayer__content"})))}render(){const{loading:e,mode:t,loggedIn:o,previousMode:n,throbberDelay:a,signupStep:s,previousSignupStep:r}=this.props;if(e||!t)return l().createElement(Bt,{delay:a});if(o)return null;let i=n?`__${t} __${n}-to-${t}`:"";return"signup"===t&&Number.isInteger(r)&&(i+=` __signup_step_${r}_to_${s}`),l().createElement("main",{className:"App",key:"main1","data-ta-id":"login-app","data-ta-login-mode":t},this.renderFakeWebPlayer(),l().createElement("div",{className:`App__content ${i}`},l().createElement(En.Z,{mode:"in-out"},l().createElement(_n.Z,{timeout:{appear:0,enter:0,exit:650},key:i},l().createElement("div",{className:`App__modal ${i}`},l().createElement(yn,null),"welcome"===t&&l().createElement(zt,null),"signup"===t&&l().createElement(Fo,{step:s}),"login"===t&&l().createElement($o,null),"open-browser"===t&&l().createElement(Vo,null),"settings"===t&&l().createElement(bn,null),l().createElement(vn,{mode:t}))))))}}f()(Sn,"defaultProps",{throbberDelay:0,transitionLeaveTimeout:0});const kn=(0,p.$j)((e=>({mode:e.app.mode,previousMode:e.app.previousMode,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay})))(Sn);var On=o(3828),Cn=o(3894);const In=Ht().create().toString(),Pn="has-used-app",Tn=!window.localStorage.getItem(Pn);Tn&&window.localStorage.setItem(Pn,!0);const Nn=()=>{const e=$.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};let An=null;var Dn=o(9798);function Un({page:e}){Ln({page:e,action_type:"pageview",action_intent:""})}function Ln({page:e,action_type:t,action_intent:o,item_id:n,action_hash:a}){(function(){if(null===An)throw new Error("Missing `instance`. Have you called `setEventSenderInstance` yet?");return An})().send((0,Dn.e)({action_type:t,action_intent:o,action_page:e,action_item_id:n,action_hash:a,device_is_new_install:Tn,device_locale:window.__spotify.locale,device_referrer:Nn(),ab_flags:"",session_id:In}),{authorize:!1})}function Fn(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}const Mn=e=>{window.location.href=e};function Rn(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function xn(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Rn(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const jn={errorMessage:null};const Bn=function(e=jn,t){var o;switch(t.type){case jt.ENTER_SIGNUP_MODE:return xn(xn({},e),{},{previousMode:e.mode,mode:"signup"});case jt.ENTER_LOGIN_MODE:case jt.COUNTRY_NOT_LAUNCHED:return xn(xn({},e),{},{previousMode:e.mode,mode:"login"});case jt.ENTER_WELCOME_MODE:return xn(xn({},e),{},{previousMode:e.mode,mode:"welcome",errorMessage:null!==(o=t.errorMessage)&&void 0!==o?o:null});case jt.ENTER_SETTINGS_MODE:return xn(xn({},e),{},{previousMode:e.mode,mode:"settings"});default:return e}};function Gn(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function Hn(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Gn(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const $n={proxy:{mode:0,address:"",username:"",password:""}};const Wn=function(e=$n,t){return function(e){return e.type===jt.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}(t)?Hn(Hn({},e),{},{proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}):e};function Vn(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function zn(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Vn(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Vn(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}const qn={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const Yn=function(e=qn,t){switch(t.type){case jt.ENTER_SIGNUP_MODE_STEP_0:return zn(zn({},e),{},{previousStep:e.step,step:0});case jt.ENTER_SIGNUP_MODE_STEP_1:return zn(zn({},e),{},{previousStep:e.step,step:1});case jt.SIGNUP_RESTRICTIONS_SUCCESS:return zn(zn({},e),{},{formData:zn(zn({},e.formData),{},{sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula}),restrictions:t.restrictions});case jt.SIGNUP_RESTRICTIONS_FAILURE:return zn(zn({},e),{},{errorData:t.error});case jt.SIGNUP_ATTEMPT:return zn(zn({},e),{},{isAttempting:!0,errorData:null});case jt.SIGNUP_SUCCESS:return zn(zn({},e),{},{isAttempting:!0,isSuccessful:!0,errorData:null});case jt.SIGNUP_FAILURE:return zn(zn({},e),{},{isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null});case jt.FACEBOOK_SIGNUP_ATTEMPT:return zn(zn({},e),{},{errorData:null,errors:{}});case jt.FACEBOOK_SIGNUP_FAILURE:return zn(zn({},e),{},{errorData:t.errorData});case jt.VALIDATE_FIELD_ATTEMPT:return zn(zn({},e),{},{errors:zn(zn({},e.errors),{},{[t.field]:void 0})});case jt.VALIDATE_FIELD_FAILURE:return zn(zn({},e),{},{errors:zn(zn({},e.errors),{},{[t.field]:t.error}),validated:zn(zn({},e.validated),{},{[t.field]:!1})});case jt.VALIDATE_FIELD_SUCCESS:return zn(zn({},e),{},{errors:zn(zn({},e.errors),{},{[t.field]:void 0}),validated:zn(zn({},e.validated),{},{[t.field]:!0})});case jt.UPDATE_SIGNUP_DATA:{const o={};for(const e of Object.keys(t.data))o[e]=void 0;return zn(zn({},e),{},{errors:zn(zn({},e.errors),o),formData:zn(zn({},e.formData),t.data)})}case jt.CLEAR_ALL_ERRORS:return zn(zn({},e),{},{errors:{}});default:return e}};const Kn=(0,On.MT)((0,On.UY)({app:Bn,login:J,settings:Wn,signup:Yn}),void 0,(0,On.md)(Cn.Z,(e=>t=>o=>{const n=t(o);switch(o.type){case jt.START_APP:e.dispatch(jt.fetchUTMParameters()),e.dispatch(jt.getSignupRestrictions());!$.getItem("lastUsername")?e.dispatch(jt.enterWelcomeMode()):e.dispatch(jt.enterLoginMode());break;case jt.LOGIN_FAIL:{const t=e.getState();if(o.loginType===jt.LOGIN_TYPE_AUTOLOGIN){const o=t.app.mode;"welcome"===o?e.dispatch(jt.enterWelcomeMode()):"login"===o?e.dispatch(jt.enterLoginMode()):"signup"===o&&e.dispatch(jt.enterSignupMode())}else{if("open-browser"===t.app.mode){const n=o.errorData;let a=Zt(n.errorCategory,n.errorCode,n.errorReference);"desktop_login_accounts"===n.errorCategory&&4===n.errorCode&&(a="signup"===t.experimentWebAuthReducer.operationUsed?_t.get("desktop-auth.login.signup-time-out"):_t.get("desktop-auth.login.login-time-out")),a?e.dispatch(jt.enterWelcomeMode(a)):e.dispatch(jt.enterWelcomeMode())}}break}case jt.ENTER_SIGNUP_MODE:{const t=e.getState().signup.restrictions;t?!1===t.is_country_launched&&e.dispatch(jt.countryNotLaunched()):e.dispatch(jt.getSignupRestrictions());break}case jt.SIGNUP_RESTRICTIONS_SUCCESS:!1===o.restrictions.is_country_launched&&e.dispatch(jt.countryNotLaunched());break;case jt.SIGNUP_FAILURE:(o.errors.email||o.errors.password||o.errors.displayname)&&e.dispatch(jt.enterSignupModeStep0());break;case jt.COUNTRY_NOT_LAUNCHED:e.dispatch(jt.openSignupPage(!0))}return n}),(()=>e=>t=>{const o=e(t);switch(t.type){case jt.ENTER_LOGIN_MODE:Un({page:"login"});break;case jt.LOGIN_SUCCESS:t.loginType===jt.LOGIN_TYPE_EMAIL?Ln({page:"login",action_type:"view",action_intent:"show-success-login-email"}):t.loginType===jt.LOGIN_TYPE_FACEBOOK&&Ln({page:"login",action_type:"view",action_intent:"show-success-login-facebook"});break;case jt.LOGIN_FAIL:t.loginType===jt.LOGIN_TYPE_EMAIL?t.errorData&&3===t.errorData.errorCode&&Ln({page:"login",action_type:"view",action_intent:"show-error-invalid-credential"}):t.loginType===jt.LOGIN_TYPE_FACEBOOK&&Ln({page:"login",action_type:"view",action_intent:"show-error-login-facebook"});break;case jt.ENTER_SIGNUP_MODE:Un({page:"signup"});break;case jt.ENTER_SIGNUP_MODE_STEP_0:Ln({page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case jt.ENTER_SIGNUP_MODE_STEP_1:Ln({page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case jt.SIGNUP_SUCCESS:Ln({page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case jt.SIGNUP_FAILURE:Ln({page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:t.errors&&Object.keys(t.errors).join("|")});break;case jt.FACEBOOK_SIGNUP_SUCCESS:Ln({page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case jt.FACEBOOK_SIGNUP_FAILURE:Ln({page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:t.errorData&&`${t.errorData.errorCode} - ${t.errorData.errorDescription}`});break;case jt.ENTER_WELCOME_MODE:Un({page:"login/welcome"});break;case jt.ENTER_SETTINGS_MODE:Un({page:"login/settings"});break;case jt.INTERACTION:Ln({page:t.page,action_type:t.interactionType,action_intent:t.intent,item_id:t.itemId,action_hash:t.actionHash});break;case jt.VALIDATE_FIELD_FAILURE:if(t.error){const e=t.field,o=t.error.code;let n=null,a=null;"valueMissing"===o?n=`show-error-empty-${e}`:["incomplete","invalid","typeMismatch","tooShort"].includes(o)?n=`show-error-format-${e}`:(n=`show-error-${e}`,a=t.error.message||""),null!==n&&Ln(function(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?Fn(Object(o),!0).forEach((function(t){f()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):Fn(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}({page:"signup",action_type:"view",action_intent:n},a?{item_id:a}:{}))}}return o}),(()=>e=>t=>{const o=e(t);if(!t.redirectTo)return o;let n;return"xpui"!==t.redirectTo||(n="spotify:app:xpui",t.redirectDelay?setTimeout((()=>{Mn(n)}),t.redirectDelay):Mn(n)),o})));Kn.subscribe((()=>{const e=Kn.getState();e.login.username&&localStorage.setItem(z,e.login.username),e.login.utmParameters&&localStorage.setItem(Y,JSON.stringify(e.login.utmParameters))}));const Xn=Kn;var Zn=o(2585),Jn=o(3626);let Qn=null;var ea=o(349),ta=o(4978);(async function(){const e=window.__spotify.locale,t=await fetch(`i18n/${e}.json`).then((e=>e.json()));_t.setLocale(e),_t.setDictionary(t)})().then((async function(){const e=function(){const e=(0,Jn.qy)({providers:{endpoints:(0,Jn.uG)(),token:()=>null}});return e.connect(),e}();Qn=e;const t=((e,t,o)=>{if("event_sender_context_information"in e){const n=e.event_sender_context_information;return(0,ea.mi)({transport:t,suppressPersist:!1,context:[(0,ta.UR)({version:n.client_version_string}),(0,ta.jx)(o),(0,ta.IE)(n.installation_id),(0,ta.Hv)({name:n.platform_type,version:n.os_version})]})}return(0,ea.mi)({transport:t,suppressPersist:!1,context:[(0,ta.jx)(o),(0,ta.UR)({version:e.client_version_quadruple}),(0,ta.IE)(e.event_sender_installation_id_hex),(0,ta.Hv)({name:e.os_name,version:e.os_version})]})})(window.__spotify,e,"65b708073fc0480ea92a077233ca87bd");!function(e){An=e}(t),m.attach(),m.update(),u.attach();const o=document.location.search,n=new RegExp(`\\?param=error-code\\${encodeURIComponent("=")}([0-9]+)`,"i");window.addEventListener("message",(e=>{"critical-update-error"===e.data&&Xn.dispatch(jt.loginFailed({errorCode:e.data}))}));const a=o.match(n);if(o&&a){const e=+a[1];Xn.dispatch(jt.loginFailed({errorCode:e}))}let s="linux";window.navigator.platform.startsWith("Mac")&&(s="mac"),window.navigator.platform.startsWith("Win")&&(s="windows"),document.body.classList.add(`body-container--${s}`),d().render(l().createElement(c.zj,null,l().createElement(p.zt,{store:Xn},l().createElement(kn,null))),document.getElementById("main")),Xn.dispatch(jt.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr");const r={[Zn.PLATFORM_UNKNOWN]:"body-container--unknown-os",[Zn.PLATFORM_MAC]:"body-container--mac",[Zn.PLATFORM_WINDOWS]:"body-container--windows"},i=(0,Zn.getPlatform)();document.body.classList.add(r[i])}))},2585:(e,t,o)=>{"use strict";o.r(t),o.d(t,{PLATFORM_UNKNOWN:()=>n,PLATFORM_MAC:()=>a,PLATFORM_WINDOWS:()=>s,isMac:()=>r,isWindows:()=>i,getPlatform:()=>l});const n=Symbol("PLATFORM_UNKNOWN"),a=Symbol("PLATFORM_MAC"),s=Symbol("PLATFORM_WINDOWS");function r(){return window.navigator.platform.startsWith("Mac")}function i(){return window.navigator.platform.startsWith("Win")}function l(){return r()?a:i()?s:n}},2976:(e,t)=>{let o=!1;t.update=()=>{},t.attach=()=>{if(o)return;o=!0;const e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)},t.detach=()=>{o&&(o=!1,document.documentElement.removeAttribute("lang"))}},685:(e,t,o)=>{const{getPlatform:n,PLATFORM_UNKNOWN:a,PLATFORM_MAC:s,PLATFORM_WINDOWS:r}=o(2585);let i=!1,l="always-visible",g=0;const d={[a]:"linux",[s]:"mac",[r]:"windows"};let c=d[a];function p(){const e=[...document.querySelectorAll("*")],t=[],o=["scroll","auto","overlay"];e.forEach((e=>{const n=window.getComputedStyle(e),a=n.overflowX,s=n.overflowY;o.includes(a)&&t.push({node:e,property:"overflow-x"}),o.includes(s)&&t.push({node:e,property:"overflow-y"})}));const n=document.createElement("style");n.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();const a=`data-scrollbar-fix-${++g}-id`;let s=0;t.forEach((({node:e,property:t})=>{if(e!==document.body){const o=++s;e.setAttribute(a,o),n.innerHTML+=`\n    [${a}="${o}"] { ${t}: hidden !important; }`}})),document.head.appendChild(n),setTimeout((()=>{document.head.removeChild(n),t.forEach((({node:e})=>{e.removeAttribute(a)}))}),0)}t.performScrollBarFix=p,t.update=function(){},t.attach=function(){if(i)return;i=!0;const e=window.__spotify&&window.__spotify.scroller_style;l="overlay"===e?"overlay":"always-visible";const t=n();c=d[t],"always-visible"===l||"mac"!==c?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add(`scrollbar-style-visible-${c}`)):(document.body.classList.remove(`scrollbar-style-visible-${c}`),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(e=>{"set_active"===e.data.name&&e.data.active&&p()}))},t.detach=function(){i&&(i=!1,g=0)}},4986:(e,t,o)=>{"use strict";o.d(t,{lX:()=>v,q_:()=>k,PP:()=>C,ob:()=>p,Ep:()=>c});var n=o(7462),a=o(8273),s=o(5429),r=o(2177);function i(e){return"/"===e.charAt(0)?e:`/${e}`}function l(e){return"/"===e.charAt(0)?e.substr(1):e}function g(e,t){return function(e,t){return new RegExp(`^${t}(\\/|\\?|#|$)`,"i").test(e)}(e,t)?e.substr(t.length):e}function d(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function c(e){const t=e.pathname,o=e.search,n=e.hash;let a=t||"/";return o&&"?"!==o&&(a+="?"===o.charAt(0)?o:`?${o}`),n&&"#"!==n&&(a+="#"===n.charAt(0)?n:`#${n}`),a}function p(e,t,o,s){let r;"string"==typeof e?(r=function(e){let t=e||"/",o="",n="";const a=t.indexOf("#");-1!==a&&(n=t.substr(a),t=t.substr(0,a));const s=t.indexOf("?");return-1!==s&&(o=t.substr(s),t=t.substr(0,s)),{pathname:t,search:"?"===o?"":o,hash:"#"===n?"":n}}(e),r.state=t):(r=(0,n.Z)({},e),void 0===r.pathname&&(r.pathname=""),r.search?"?"!==r.search.charAt(0)&&(r.search=`?${r.search}`):r.search="",r.hash?"#"!==r.hash.charAt(0)&&(r.hash=`#${r.hash}`):r.hash="",void 0!==t&&void 0===r.state&&(r.state=t));try{r.pathname=decodeURI(r.pathname)}catch(e){}return o&&(r.key=o),s?r.pathname?"/"!==r.pathname.charAt(0)&&(r.pathname=(0,a.Z)(r.pathname,s.pathname)):r.pathname=s.pathname:r.pathname||(r.pathname="/"),r}function u(){let e=null;let t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,o,n,a){if(null!=e){const s="function"==typeof e?e(t,o):e;"string"==typeof s?"function"==typeof n?n(s,a):a(!0):a(!1!==s)}else a(!0)},appendListener:function(e){let o=!0;function n(){o&&e.apply(void 0,arguments)}return t.push(n),function(){o=!1,t=t.filter((function(e){return e!==n}))}},notifyListeners:function(){for(var e=arguments.length,o=new Array(e),n=0;n<e;n++)o[n]=arguments[n];t.forEach((function(e){return e.apply(void 0,o)}))}}}const m=!("undefined"==typeof window||!window.document||!window.document.createElement);function h(e,t){t(window.confirm(e))}const f="popstate",b="hashchange";function w(){try{return window.history.state||{}}catch(e){return{}}}function v(e){void 0===e&&(e={}),m||(0,r.Z)(!1);const t=window.history,o=function(){const e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),s=e,l=s.forceRefresh,v=void 0!==l&&l,y=s.getUserConfirmation,_=void 0===y?h:y,E=s.keyLength,S=void 0===E?6:E,k=e.basename?d(i(e.basename)):"";function O(e){const t=e||{},o=t.key,n=t.state,a=window.location;let s=a.pathname+a.search+a.hash;return k&&(s=g(s,k)),p(s,n,o)}function C(){return Math.random().toString(36).substr(2,S)}const I=u();function P(e){(0,n.Z)(B,e),B.length=t.length,I.notifyListeners(B.location,B.action)}function T(e){(function(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")})(e)||D(O(e.state))}function N(){D(O(w()))}let A=!1;function D(e){if(A)A=!1,P();else{const t="POP";I.confirmTransitionTo(e,t,_,(function(o){o?P({action:t,location:e}):function(e){const t=B.location;let o=L.indexOf(t.key);-1===o&&(o=0);let n=L.indexOf(e.key);-1===n&&(n=0);const a=o-n;a&&(A=!0,M(a))}(e)}))}}const U=O(w());var L=[U.key];function F(e){return k+c(e)}function M(e){t.go(e)}let R=0;function x(e){R+=e,1===R&&1===e?(window.addEventListener(f,T),a&&window.addEventListener(b,N)):0===R&&(window.removeEventListener(f,T),a&&window.removeEventListener(b,N))}let j=!1;var B={length:t.length,action:"POP",location:U,createHref:F,push:function(e,n){const a="PUSH",s=p(e,n,C(),B.location);I.confirmTransitionTo(s,a,_,(function(e){if(!e)return;const n=F(s),r=s.key,i=s.state;if(o)if(t.pushState({key:r,state:i},null,n),v)window.location.href=n;else{const e=L.indexOf(B.location.key),t=L.slice(0,-1===e?0:e+1);t.push(s.key),L=t,P({action:a,location:s})}else window.location.href=n}))},replace:function(e,n){const a="REPLACE",s=p(e,n,C(),B.location);I.confirmTransitionTo(s,a,_,(function(e){if(!e)return;const n=F(s),r=s.key,i=s.state;if(o)if(t.replaceState({key:r,state:i},null,n),v)window.location.replace(n);else{const e=L.indexOf(B.location.key);-1!==e&&(L[e]=s.key),P({action:a,location:s})}else window.location.replace(n)}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);const t=I.setPrompt(e);return j||(x(1),j=!0),function(){return j&&(j=!1,x(-1)),t()}},listen:function(e){const t=I.appendListener(e);return x(1),function(){x(-1),t()}}};return B}const y="hashchange",_={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:`!/${l(e)}`},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:l,decodePath:i},slash:{encodePath:i,decodePath:i}};function E(){const e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function S(e){const t=window.location.href.indexOf("#");window.location.replace(`${window.location.href.slice(0,t>=0?t:0)}#${e}`)}function k(e){void 0===e&&(e={}),m||(0,r.Z)(!1);const t=window.history,o=(window.navigator.userAgent.indexOf("Firefox"),e),a=o.getUserConfirmation,l=void 0===a?h:a,f=o.hashType,b=void 0===f?"slash":f,w=e.basename?d(i(e.basename)):"",v=_[b],k=v.encodePath,O=v.decodePath;function C(){let e=O(E());return w&&(e=g(e,w)),p(e)}const I=u();function P(e){(0,n.Z)(B,e),B.length=t.length,I.notifyListeners(B.location,B.action)}let T=!1,N=null;function A(){const e=E(),t=k(e);if(e!==t)S(t);else{const e=C(),t=B.location;if(!T&&(n=e,(o=t).pathname===n.pathname&&o.search===n.search&&o.hash===n.hash&&o.key===n.key&&(0,s.Z)(o.state,n.state)))return;if(N===c(e))return;N=null,function(e){if(T)T=!1,P();else{const t="POP";I.confirmTransitionTo(e,t,l,(function(o){o?P({action:t,location:e}):function(e){const t=B.location;let o=F.lastIndexOf(c(t));-1===o&&(o=0);let n=F.lastIndexOf(c(e));-1===n&&(n=0);const a=o-n;a&&(T=!0,M(a))}(e)}))}}(e)}var o,n}const D=E(),U=k(D);D!==U&&S(U);const L=C();var F=[c(L)];function M(e){t.go(e)}let R=0;function x(e){R+=e,1===R&&1===e?window.addEventListener(y,A):0===R&&window.removeEventListener(y,A)}let j=!1;var B={length:t.length,action:"POP",location:L,createHref:function(e){return`#${k(w+c(e))}`},push:function(e,t){const o="PUSH",n=p(e,void 0,void 0,B.location);I.confirmTransitionTo(n,o,l,(function(e){if(!e)return;const t=c(n),a=k(w+t);if(E()!==a){N=t,function(e){window.location.hash=e}(a);const e=F.lastIndexOf(c(B.location)),s=F.slice(0,-1===e?0:e+1);s.push(t),F=s,P({action:o,location:n})}else P()}))},replace:function(e,t){const o="REPLACE",n=p(e,void 0,void 0,B.location);I.confirmTransitionTo(n,o,l,(function(e){if(!e)return;const t=c(n),a=k(w+t);E()!==a&&(N=t,S(a));const s=F.indexOf(c(B.location));-1!==s&&(F[s]=t),P({action:o,location:n})}))},go:M,goBack:function(){M(-1)},goForward:function(){M(1)},block:function(e){void 0===e&&(e=!1);const t=I.setPrompt(e);return j||(x(1),j=!0),function(){return j&&(j=!1,x(-1)),t()}},listen:function(e){const t=I.appendListener(e);return x(1),function(){x(-1),t()}}};return B}function O(e,t,o){return Math.min(Math.max(e,t),o)}function C(e){void 0===e&&(e={});const t=e,o=t.getUserConfirmation,a=t.initialEntries,s=void 0===a?["/"]:a,r=t.initialIndex,i=void 0===r?0:r,l=t.keyLength,g=void 0===l?6:l,d=u();function m(e){(0,n.Z)(y,e),y.length=y.entries.length,d.notifyListeners(y.location,y.action)}function h(){return Math.random().toString(36).substr(2,g)}const f=O(i,0,s.length-1),b=s.map((function(e){return p(e,void 0,"string"==typeof e?h():e.key||h())})),w=c;function v(e){const t=O(y.index+e,0,y.entries.length-1),n=y.entries[t];d.confirmTransitionTo(n,"POP",o,(function(e){e?m({action:"POP",location:n,index:t}):m()}))}var y={length:b.length,action:"POP",location:b[f],index:f,entries:b,createHref:w,push:function(e,t){const n="PUSH",a=p(e,t,h(),y.location);d.confirmTransitionTo(a,n,o,(function(e){if(!e)return;const t=y.index+1,o=y.entries.slice(0);o.length>t?o.splice(t,o.length-t,a):o.push(a),m({action:n,location:a,index:t,entries:o})}))},replace:function(e,t){const n="REPLACE",a=p(e,t,h(),y.location);d.confirmTransitionTo(a,n,o,(function(e){e&&(y.entries[y.index]=a,m({action:n,location:a}))}))},go:v,goBack:function(){v(-1)},goForward:function(){v(1)},canGo:function(e){const t=y.index+e;return t>=0&&t<y.entries.length},block:function(e){return void 0===e&&(e=!1),d.setPrompt(e)},listen:function(e){return d.appendListener(e)}};return y}}},o={};function n(e){var a=o[e];if(void 0!==a)return a.exports;var s=o[e]={exports:{}};return t[e](s,s.exports,n),s.exports}n.m=t,n.amdO={},e=[],n.O=(t,o,a,s)=>{if(!o){var r=1/0;for(d=0;d<e.length;d++){for(var[o,a,s]=e[d],i=!0,l=0;l<o.length;l++)(!1&s||r>=s)&&Object.keys(n.O).every((e=>n.O[e](o[l])))?o.splice(l--,1):(i=!1,s<r&&(r=s));if(i){e.splice(d--,1);var g=a();void 0!==g&&(t=g)}}return t}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[o,a,s]},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={535:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var a,s,[r,i,l]=o,g=0;if(r.some((t=>0!==e[t]))){for(a in i)n.o(i,a)&&(n.m[a]=i[a]);if(l)var d=l(n)}for(t&&t(o);g<r.length;g++)s=r[g],n.o(e,s)&&e[s]&&e[s][0](),e[r[g]]=0;return n.O(d)},o=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var a=n.O(void 0,[569],(()=>n(3982)));a=n.O(a)})();
//# sourceMappingURL=login.js.map